<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on January, 9  2002 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>Keeping Track: GNATS user tools</TITLE>

<META NAME="description" CONTENT="Keeping Track: GNATS user tools">
<META NAME="keywords" CONTENT="Keeping Track: GNATS user tools">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC11"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_1.html#SEC9"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC12"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 2. The GNATS User Tools </H1>
<!--docid::SEC11::-->
<P>

This chapter describes the user tools distributed with GNATS.  The
GNATS administrative and internal tools tools are described in
<A HREF="gnats_4.html#SEC47">GNATS Administration</A>. The user tools provide
facilities for initial submission, querying and editing of Problem
Reports:
</P><P>

<DL COMPACT>
<DT><CODE>send-pr</CODE>
<DD>Used by anyone who has a problem with a body of work to submit a report
of the problem to the maintainers of that work
(see section <A HREF="gnats_2.html#SEC13">Submitting Problem Reports</A>).
<P>

<DT><CODE>query-pr</CODE>
<DD>Used to query the GNATS database (see section <A HREF="gnats_2.html#SEC21">Querying the database</A>).
<P>

<DT><CODE>edit-pr</CODE>
<DD>Used to edit Problem Reports (to record new data, to change the
responsible party, etc.) (see section <A HREF="gnats_2.html#SEC19">Editing existing Problem Reports</A>).
</DL>
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC12">2.1 Environment variables and GNATS tools</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC13">2.2 Submitting Problem Reports</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC19">2.3 Editing existing Problem Reports</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC21">2.4 Querying the database</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC26">2.5 The Emacs interface to GNATS</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The Emacs interface</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Environment"></A>
<HR SIZE="6">
<A NAME="SEC12"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC11"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC13"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.1 Environment variables and GNATS tools </H2>
<!--docid::SEC12::-->
<P>

All the GNATS user tools honor the <CODE>GNATSDB</CODE> environment
variable which is used to determine which database to use.  For a local
database, it contains the name of the database to access.
</P><P>

For network access via gnatsd, it contains a colon-separated list of
strings that describe the remote database in the form
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smalldisplay><FONT SIZE=-1><pre style="font-family: serif"><VAR>server:port:databasename:username:password</VAR>
</pre></FONT></td></tr></table></P><P>

Any of the fields may be omitted except for <VAR>server</VAR>, but at least
one colon must appear; otherwise, the value is assumed to be the name of
a local database.
</P><P>

If <CODE>GNATSDB</CODE> is not set and no command-line options are used to
specify the database, it is assumed that the database is local and that
its name is <SAMP>`default'</SAMP>.
</P><P>

<A NAME="send-pr"></A>
<HR SIZE="6">
<A NAME="SEC13"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC12"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC14"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.2 Submitting Problem Reports </H2>
<!--docid::SEC13::-->
<P>

Use <CODE>send-pr</CODE> to submit Problem Reports to the database.
<CODE>send-pr</CODE> is a shell script which composes a template for
submitters to complete.
</P><P>

You can invoke <CODE>send-pr</CODE> from a shell prompt, or from within
GNU Emacs using <SAMP>`M-x send-pr'</SAMP>.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC14">2.2.1 Creating new Problem Reports</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC15">2.2.2 Using <CODE>send-pr</CODE> from within Emacs</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Using send-pr from within Emacs</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC16">2.2.3 Invoking <CODE>send-pr</CODE> from the shell</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Invoking send-pr from the shell</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC17">2.2.4 Submitting a Problem Report via direct e-mail</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC18">2.2.5 Helpful hints</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="using send-pr"></A>
<HR SIZE="6">
<A NAME="SEC14"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC13"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC15"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC13"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.2.1 Creating new Problem Reports </H3>
<!--docid::SEC14::-->
<P>

Invoking <CODE>send-pr</CODE> presents a PR <EM>template</EM> with a number of
fields already filled in.  Complete the template as thoroughly as
possible to make a useful bug report.  Submit only one bug with each PR.
</P><P>

<A NAME="IDX103"></A>
A template consists of three sections:
</P><P>

<DL COMPACT>
<DT><EM>Comments</EM>
<DD>The top several lines of a blank template consist of a series of
comments that provide some basic instructions for completing the Problem
Report, as well as a list of valid entries for the <SAMP>`&#62;Category:'</SAMP>
field.  These comments are all preceded by the string <SAMP>`SEND-PR:'</SAMP>
and are erased automatically when the PR is submitted.  The
instructional comments within <SAMP>`&#60;'</SAMP> and <SAMP>`&#62;'</SAMP> are also removed.
(Only these comments are removed; lines you provide that happen to have
those characters in them, such as examples of shell-level redirection,
are not affected.)
<P>

<DT><EM>Mail Header</EM>
<DD><CODE>send-pr</CODE> creates a standard mail header.  <CODE>send-pr</CODE> completes
all fields except the <SAMP>`Subject:'</SAMP> line with default values.
(See section <A HREF="gnats_1.html#SEC5">Problem Report format</A>.)
<P>

<DT><EM>GNATS fields</EM>
<DD>These are the informational fields that GNATS uses to route your
Problem Report to the responsible party for further action.  They should
be filled out as completely as possible.  (See section <A HREF="gnats_1.html#SEC5">Problem Report format</A>.  Also see <A HREF="gnats_2.html#SEC18">Helpful hints</A>.)
</DL>
<P>

The default template contains your preconfigured <SAMP>`&#62;Submitter-Id:'</SAMP>.
<CODE>send-pr</CODE> attempts to determine values for the <SAMP>`&#62;Originator:'</SAMP>
and <SAMP>`&#62;Organization:'</SAMP> fields (see section <A HREF="gnats_1.html#SEC5">Problem Report format</A>).  <CODE>send-pr</CODE> will set the <SAMP>`&#62;Originator:'</SAMP> field to
the value of the <CODE>NAME</CODE> environment variable if it has been set;
similarly, <SAMP>`&#62;Organization:'</SAMP> will be set to the value of <CODE>ORGANIZATION</CODE>.
<CODE>send-pr</CODE> also attempts to find out some information
about your system and architecture, and places this information in the
<SAMP>`&#62;Environment:'</SAMP> field if it finds any.
</P><P>

You may submit problem reports to different Support Sites from the
default site by specifying the alternate site when you invoke
<CODE>send-pr</CODE>.  See section <A HREF="gnats_2.html#SEC16">2.2.3 Invoking <CODE>send-pr</CODE> from the shell</A>.
Each <CODE>site</CODE> has its own list of categories for
which it accepts Problem Reports.
</P><P>

<CODE>send-pr</CODE> also provides the mail header section of the template
with default values in the <SAMP>`To:'</SAMP>, <SAMP>`From:'</SAMP>, and
<SAMP>`Reply-To:'</SAMP> fields.  The <SAMP>`Subject:'</SAMP> field is empty.
</P><P>

The template begins with a comment section:
</P><P>

<A NAME="IDX104"></A>
<A NAME="IDX105"></A>
<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>SEND-PR: -*- send-pr  -*-
SEND-PR: Lines starting with `SEND-PR' will be removed
SEND-PR: automatically as well as all comments (the text 
SEND-PR: below enclosed in `&#60;' and `&#62;').
SEND-PR: 
SEND-PR: Please consult the document `Reporting Problems 
SEND-PR: Using send-pr' if you are not sure how to fill out
SEND-PR: a problem report.
SEND-PR:
SEND-PR: Choose from the following categories:
</FONT></pre></td></tr></table></P><P>

and also contains a list of valid <CODE>&#62;Category:</CODE> values for the
Support Site to whom you are submitting this Problem Report.  One (and
only one) of these values should be placed in the <CODE>&#62;Category:</CODE>
field.
</P><P>

The mail header is just below the comment section.  Fill out the
<SAMP>`Subject:'</SAMP> field, if it is not already completed using the value of
<SAMP>`&#62;Synopsis:'</SAMP>.  The other mail header fields contain default values.
</P><P>

<A NAME="IDX106"></A>
<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>To: <VAR>support-site</VAR>
Subject: <EM>complete this field</EM>
From: <VAR>your-login</VAR>@<VAR>your-site</VAR>
Reply-To: <VAR>your-login</VAR>@<VAR>your-site</VAR>
X-send-pr-version: send-pr 4.0-beta1
</FONT></pre></td></tr></table></P><P>

where <VAR>support-site</VAR> is an alias on your local machine for the
Support Site you wish to submit this PR to.
</P><P>

The rest of the template contains GNATS fields.  Each field is
either automatically completed with valid information (such as your
<SAMP>`&#62;Submitter-Id:'</SAMP>) or contains a one-line instruction specifying the
information that field requires in order to be correct.  For example,
the <SAMP>`&#62;Confidential:'</SAMP> field expects a value of <SAMP>`yes'</SAMP> or
<SAMP>`no'</SAMP>, and the answer must fit on one line; similarly, the
<SAMP>`&#62;Synopsis:'</SAMP> field expects a short synopsis of the problem, which
must also fit on one line.  Fill out the fields as completely as
possible.  See section <A HREF="gnats_2.html#SEC18">Helpful hints</A>, for suggestions as to
what kinds of information to include.
</P><P>

In this example, words in <EM>italics</EM> are filled in with
pre-configured information:
</P><P>

<A NAME="IDX107"></A>
<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>&#62;Submitter-Id: <EM>your submitter-id</EM>
&#62;Originator:   <EM>your name here</EM>
&#62;Organization:  
    <EM>your organization</EM>
&#62;Confidential:&#60;[ yes | no ] (one line)&#62;
&#62;Synopsis:    &#60;synopsis of the problem (one line)&#62;
&#62;Severity:    &#60;[non-critical | serious | critical](one line)&#62;
&#62;Priority:    &#60;[ low | medium | high ] (one line)&#62;
&#62;Category:    &#60;name of the product (one line)&#62;
&#62;Class:       &#60;[sw-bug | doc-bug | change-request | support]&#62;
&#62;Release:     &#60;release number (one line)&#62;
&#62;Environment:
         &#60;machine, os, target, libraries (multiple lines)&#62;

&#62;Description:
       &#60;precise description of the problem (multiple lines)&#62;
&#62;How-To-Repeat:
       &#60;code/input/activities to reproduce (multiple lines)&#62;
&#62;Fix:
       &#60;how to correct or work around the problem, if known 
        (multiple lines)&#62;
</FONT></pre></td></tr></table></P><P>

<A NAME="IDX108"></A>
<A NAME="IDX109"></A>
When you finish editing the Problem Report, <CODE>send-pr</CODE> mails it to
the address named in the <SAMP>`To:'</SAMP> field in the mail header.
<CODE>send-pr</CODE> checks that the complete form contains a valid
<SAMP>`&#62;Category:'</SAMP>.
</P><P>

<A NAME="IDX110"></A>
<A NAME="IDX111"></A>
<A NAME="IDX112"></A>
If your PR has an invalid value in one of the ENUMERATED fields
(see section <A HREF="gnats_1.html#SEC5">Problem Report format</A>), <CODE>send-pr</CODE> places the PR in
a temporary file named <SAMP>`/tmp/pbad<VAR>nnnn</VAR>'</SAMP> on your machine.
<VAR>nnnn</VAR> is the process identification number given to your current
<CODE>send-pr</CODE> session.  If you are running <CODE>send-pr</CODE> from the
shell, you are prompted as to whether or not you wish to try editing the
same Problem Report again.  If you are running <CODE>send-pr</CODE> from
Emacs, the Problem Report is placed in the buffer
<SAMP>`*gnats-send*'</SAMP>; you can edit this file and then submit it
with <KBD>C-c C-c</KBD>.
</P><P>

<A NAME="IDX113"></A>
<A NAME="IDX114"></A>
<A NAME="IDX115"></A>
<A NAME="IDX116"></A>
<A NAME="IDX117"></A>
Any further mail concerning this Problem Report should be carbon-copied
to the GNATS mailing address as well, with the category and
identification number in the <SAMP>`Subject:'</SAMP> line of the message.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>Subject: Re: PR <VAR>category</VAR>/<VAR>gnats-id</VAR>: <VAR>original message subject</VAR>
</FONT></pre></td></tr></table></P><P>

Messages which arrive with <SAMP>`Subject:'</SAMP> lines of this form are
automatically appended to the Problem Report in the <SAMP>`&#62;Audit-Trail:'</SAMP>
field in the order received.
</P><P>

<A NAME="send-pr in Emacs"></A>
<HR SIZE="6">
<A NAME="SEC15"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC14"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC16"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC16"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC13"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.2.2 Using <CODE>send-pr</CODE> from within Emacs </H3>
<!--docid::SEC15::-->
<P>

You can use an interactive <CODE>send-pr</CODE> interface from within GNU
Emacs to fill out your Problem Report.  We recommend that you
familiarize yourself with Emacs before using this feature
(see section `Introduction' in <CITE>GNU Emacs</CITE>).
</P><P>

Call <CODE>send-pr</CODE> with <SAMP>`M-x send-pr'</SAMP>.<A NAME="DOCF1" HREF="gnats_fot.html#FOOT1">(1)</A>  <CODE>send-pr</CODE> responds with a
Problem Report template preconfigured for the Support Site to which
you are going to send the report.
</P><P>

You may also submit problem reports to different Support Sites from the
default site.  To use this feature, invoke <CODE>send-pr</CODE> with
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>C-u M-x send-pr
</FONT></pre></td></tr></table></P><P>

<CODE>send-pr</CODE> prompts you for the name of a <VAR>site</VAR>.  <VAR>site</VAR> is
an alias on your local machine which points to an alternate Support
Site.  The Emacs interface to GNATS is described in a separate
section, See section <A HREF="gnats_2.html#SEC26">2.5 The Emacs interface to GNATS</A>.
</P><P>

<A NAME="send-pr from the shell"></A>
<HR SIZE="6">
<A NAME="SEC16"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC15"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC17"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC17"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC13"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.2.3 Invoking <CODE>send-pr</CODE> from the shell </H3>
<!--docid::SEC16::-->
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>send-pr [ <VAR>site</VAR> ]
        [ -f <VAR>problem-report</VAR> | --file <VAR>problem-report</VAR> ]
        [ -t <VAR>mail-address</VAR> | --to <VAR>mail-address</VAR> ]
        [ --request-id ]
        [ -L | --list ] [ -P | --print ]
        [ -V | --version] [ -h | --help ]
</FONT></pre></td></tr></table></P><P>

<VAR>site</VAR> is an alias on your local machine which points to an address
used by a Support Site.  If this argument is not present, the default
<VAR>site</VAR> is usually the site which you received <CODE>send-pr</CODE> from,
or your local site if you use GNATS locally.
</P><P>

Invoking <CODE>send-pr</CODE> with no options calls the editor named in your
environment variable <CODE>EDITOR</CODE> on a default PR template.  If the
environment variable <CODE>PR_FORM</CODE> is set, its value is used as a file
name which contains a valid template.  If <CODE>PR_FORM</CODE> points to a
missing or unreadable file, or if the file is empty, <CODE>send-pr</CODE>
generates an error message and opens the editor on a default template.
</P><P>

<DL COMPACT>
<DT><CODE>-f <VAR>problem-report</VAR></CODE>
<DD><DT><CODE>--file <VAR>problem-report</VAR></CODE>
<DD>Specifies a file, <VAR>problem-report</VAR>, where a completed Problem Report
already exists.  <CODE>send-pr</CODE> sends the contents of the file without
invoking an editor.  If <VAR>problem-report</VAR> is <SAMP>`-'</SAMP>,
<CODE>send-pr</CODE> reads from standard input.
<P>

<DT><CODE>-t <VAR>mail-address</VAR></CODE>
<DD><DT><CODE>--to <VAR>mail-address</VAR></CODE>
<DD>Sends the PR to <VAR>mail-address</VAR>. The default is preset when
<CODE>send-pr</CODE> is configured.  <EM>This option is not recommended</EM>;
instead, use the argument <VAR>site</VAR> on the command line.
<P>

<DT><CODE>-c <VAR>mail-address</VAR></CODE>
<DD><DT><CODE>--cc <VAR>mail-address</VAR></CODE>
<DD>Places <VAR>mail-address</VAR> in the <CODE>Cc:</CODE> header field of the message
to be sent.
<P>

<DT><CODE>--request-id</CODE>
<DD>Sends a request for a <CODE>&#62;Submitter-Id:</CODE> to the Support Site.
<P>

<A NAME="IDX118"></A>
<DT><CODE>-L</CODE>
<DD><DT><CODE>--list</CODE>
<DD>Prints the list of valid <CODE>&#62;Category:</CODE> values on standard output.
No mail is sent.
<P>

<DT><CODE>-s <VAR>severity</VAR></CODE>
<DD><DT><CODE>--severity <VAR>severity</VAR></CODE>
<DD><A NAME="IDX119"></A>
Sets the initial value of the <CODE>&#62;Severity:</CODE> field to <VAR>severity</VAR>.
<P>

<DT><CODE>-P</CODE>
<DD><DT><CODE>--print</CODE>
<DD>Displays the PR template.  If the variable <CODE>PR_FORM</CODE> is set in your
environment, the file it specifies is printed.  If <CODE>PR_FORM</CODE> is not
set, <CODE>send-pr</CODE> prints the standard blank form.  If the file
specified by <CODE>PR_FORM</CODE> doesn't exist, <CODE>send-pr</CODE> displays an
error message.  No mail is sent.
<P>

<DT><CODE>-V</CODE>
<DD><DT><CODE>--version</CODE>
<DD>Displays the <CODE>send-pr</CODE> version number and a usage summary.  No mail
is sent.
<P>

<DT><CODE>-h</CODE>
<DD><DT><CODE>--help</CODE>
<DD>Displays a usage summary for <CODE>send-pr</CODE>.  No mail is sent.
</DL>
<P>

<A NAME="Submitting via e-mail"></A>
<HR SIZE="6">
<A NAME="SEC17"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC16"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC18"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC18"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC13"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.2.4 Submitting a Problem Report via direct e-mail </H3>
<!--docid::SEC17::-->
In addition to using <CODE>send-pr</CODE>, there is another way to submit a problem
report.  You can simply send an e-mail message to the support site.
<P>

To do this, look at the address in the <SAMP>`To:'</SAMP> field of the <CODE>send-pr</CODE>
template.  When you send unformatted e-mail to this address, GNATS
processes the message as a new problem report, filling in as many fields from 
defaults as it can:
</P><P>

<DL COMPACT>
<DT><CODE>Synopsis</CODE>
<DD>The <SAMP>`&#62;Synopsis'</SAMP> field is filled in by the <SAMP>`Subject:'</SAMP> header.
<P>

<DT><CODE>Submitter ID</CODE>
<DD>GNATS will try to derive the <SAMP>`&#62;Submitter'</SAMP> field from the address
in the <SAMP>`From:'</SAMP> header.
<P>

<DT><CODE>Description</CODE>
<DD>All of the text in the body of the e-mail message is put into the 
<SAMP>`&#62;Description'</SAMP> field.  Each line of the text is indented by one space,
indicating that it is "quoted text" from the sender.
</DL>
<P>

Other fields, such as category, version, severity, etc. are set to default
values (if the GNATS administrator has set them).
</P><P>

<A NAME="Helpful hints"></A>
<HR SIZE="6">
<A NAME="SEC18"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC17"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC13"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.2.5 Helpful hints </H3>
<!--docid::SEC18::-->
<P>

There is no orthodox standard for submitting effective bug reports,
though you might do well to consult the section on submitting bugs for
GNU <CODE>gcc</CODE> in section `Reporting Bugs' in <CITE>Using and Porting GNU CC</CITE>, by Richard Stallman.  This section contains
instructions on what kinds of information to include and what kinds of
mistakes to avoid.
</P><P>

In general, common sense (assuming such an animal exists) dictates the
kind of information that would be most helpful in tracking down and
resolving problems in software.  
<UL>
<LI>
Include anything <EM>you</EM> would want to know if you were looking at
the report from the other end.  There's no need to include every minute
detail about your environment, although anything that might be different
from someone else's environment should be included (your path, for
instance).
<P>

<LI>
Narratives are often useful, given a certain degree of restraint.  If a
person responsible for a bug can see that A was executed, and then B and
then C, knowing that sequence of events might trigger the realization of
an intermediate step that was missing, or an extra step that might have
changed the environment enough to cause a visible problem.  Again,
restraint is always in order ("I set the build running, went to get a
cup of coffee (Columbian, cream but no sugar), talked to Sheila on the
phone, and then THIS happened<small>...</small>") but be sure to include anything
relevant.
<P>

<LI>
Richard Stallman writes, "The fundamental principle of reporting bugs
usefully is this: <STRONG>report all the facts</STRONG>.  If you are not sure
whether to state a fact or leave it out, state it!"  This holds true
across all problem reporting systems, for computer software or social
injustice or motorcycle maintenance.  It is especially important in the
software field due to the major differences seemingly insignificant
changes can make (a changed variable, a missing semicolon, etc.).
<P>

<LI>
Submit only <EM>one</EM> problem with each Problem Report.  If you have
multiple problems, use multiple PRs.  This aids in tracking each problem
and also in analyzing the problems associated with a given program.
<P>

<LI>
It never hurts to do a little research to find out if the bug you've
found has already been reported.  Most software releases contain lists
of known bugs in the Release Notes which come with the software; see
your system administrator if you don't have a copy of these.
<P>

<LI>
The more closely a PR adheres to the standard format, the less
interaction is required by a database administrator to route the
information to the proper place.  Keep in mind that anything that
requires human interaction also requires time that might be better spent
in actually fixing the problem.  It is therefore in everyone's best
interest that the information contained in a PR be as correct as
possible (in both format and content) at the time of submission.
</UL>
<P>

<A NAME="edit-pr"></A>
<HR SIZE="6">
<A NAME="SEC19"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC18"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC20"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC21"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC21"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.3 Editing existing Problem Reports </H2>
<!--docid::SEC19::-->
<P>

Use <CODE>edit-pr</CODE> to make changes to existing PRs in the database.
This tool can be invoked both from a shell prompt or from within GNU
Emacs using <SAMP>`M-x edit-pr'</SAMP>.
</P><P>

<CODE>edit-pr</CODE> first examines the PR you wish to edit and locks it if it
is not already locked.  This is to prevent you from editing a PR at the
same time as another user.  If the PR you wish to edit is already in the
process of being edited, <CODE>edit-pr</CODE> tells you the name of the person
who owns the lock.
</P><P>

You may edit any non-readonly fields in the database.  We recommend that
you avoid deleting any information in the TEXT and MULTITEXT
fields (such as <SAMP>`&#62;Description:'</SAMP> and <SAMP>`&#62;How-To-Repeat:'</SAMP>
(see section <A HREF="gnats_1.html#SEC5">Problem Report format</A>).  We also recommend that you
record the final solution to the problem in the <SAMP>`&#62;Fix:'</SAMP> field for
future reference.
</P><P>

After the PR has been edited, the PR is then resubmitted to the
database, and the index is updated (see section <A HREF="gnats_4.html#SEC68">The <CODE>index</CODE> file</A>).  For information on <CODE>pr-edit</CODE>, the main driver for
<CODE>edit-pr</CODE>, see <A HREF="gnats_4.html#SEC77">Internal utilities</A>.
</P><P>

If you change a field that requires a reason for the change, such as the
<SAMP>`&#62;Responsible:'</SAMP> or <SAMP>`&#62;State:'</SAMP> fields in the default
configuration, <CODE>edit-pr</CODE> prompts you to supply a reason for the
change.  A message is then appended to the <SAMP>`&#62;Audit-Trail:'</SAMP> section
of the PR with the changed values and the change reason.
</P><P>

Depending on how the database is configured, editing various fields in
the PR may also cause mail to be sent concerning these changes.  In the
default configuration, any fields that generate <SAMP>`&#62;Audit-Trail:'</SAMP>
entries will also cause a copy of the new <SAMP>`&#62;Audit-Trail:'</SAMP> message
to be sent.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC20">2.3.1 Invoking <CODE>edit-pr</CODE> from the shell</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="edit-pr from the shell"></A>
<HR SIZE="6">
<A NAME="SEC20"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC21"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC21"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC19"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC21"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.3.1 Invoking <CODE>edit-pr</CODE> from the shell </H3>
<!--docid::SEC20::-->
<P>

The usage for <CODE>edit-pr</CODE> is:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>edit-pr [ -V | --version ] [ -h | --help ]
        [-d <VAR>database</VAR> | --database <VAR>database</VAR>] <VAR>PR Number</VAR>
</FONT></pre></td></tr></table></P><P>

Network-mode-only options:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>         [--host <VAR>host</VAR> | -H <VAR>host</VAR>] [--port <VAR>port</VAR>]
         [--user <VAR>user</VAR> | -v <VAR>user</VAR>]
         [--passwd <VAR>passwd</VAR> | -w <VAR>passwd</VAR>]
</FONT></pre></td></tr></table></P><P>

The options have the following meaning:
</P><P>

<DL COMPACT>
<DT><CODE>-h, --help</CODE>
<DD>Prints a brief usage message for edit-pr.
<P>

<DT><CODE>-V, --version</CODE>
<DD>Prints the version number for edit-pr.
<P>

<DT><CODE>-d, --database</CODE>
<DD>Specifies the database containing the PR to be edited; if no database is
specified, the database named <SAMP>`default'</SAMP> is assumed.  This option
overrides the database specified in the <CODE>GNATSDB</CODE> environment
variable.
<P>

<DT><CODE>--host <VAR>host</VAR>, -H <VAR>host</VAR></CODE>
<DD>Specifies the hostname of the gnatsd server to communicate with.  This
overrides the value in the <CODE>GNATSDB</CODE> environment variable.
<P>

<DT><CODE>--port <VAR>port</VAR></CODE>
<DD>Specifies the port number of the gnatsd server to communicate with.
This overrides the value in the <CODE>GNATSDB</CODE> environment variable.
<P>

<DT><CODE>--user <VAR>user</VAR>, -v <VAR>user</VAR></CODE>
<DD>Specifies the username to login with when connecting to the gnatsd
server.  This overrides the value in the <CODE>GNATSDB</CODE> environment
variable.
<P>

<DT><CODE>--passwd <VAR>passwd</VAR>, -w <VAR>passwd</VAR></CODE>
<DD>Specifies the password to login with when connecting to the gnatsd
server.  This overrides the value in the <CODE>GNATSDB</CODE> environment
variable.
</DL>
<P>

<CODE>edit-pr</CODE> calls the editor specified in your environment variable
<CODE>EDITOR</CODE> on a temporary copy of that PR.  (If you don't have the
variable <CODE>EDITOR</CODE> defined in your environment, the default editor
<CODE>vi</CODE> is used.)
</P><P>

Edit the PR, changing any relevant fields or adding to existing
information.  When you exit the editor, <CODE>edit-pr</CODE> prompts you on
standard input for a reason if you have changed a field that requires
specifying a reason for the change.
</P><P>

<A NAME="query-pr"></A>
<HR SIZE="6">
<A NAME="SEC21"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC20"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC22"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.4 Querying the database </H2>
<!--docid::SEC21::-->
<P>

Obtain information from the database by using the program
<CODE>query-pr</CODE>. <CODE>query-pr</CODE> uses search parameters you provide
to find matching Problem Reports in the database.  You can invoke
<CODE>query-pr</CODE> from the shell or from within Emacs.  <CODE>query-pr</CODE>
uses the same arguments whether it is invoked from the shell or from
Emacs.
</P><P>

PRs may be selected via the use of the <CODE>--expr</CODE> option, directly by
number, or by the use of the (now deprecated) field-specific query
operators.
</P><P>

By default, query options are connected with a logical AND.  For
example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>query-pr --category=foo --responsible=bar
</FONT></pre></td></tr></table></P><P>

only prints PRs which have a Category field of <SAMP>`foo'</SAMP> and a Responsible
field of <SAMP>`bar'</SAMP>.
</P><P>

The <CODE>--or</CODE> option may be used to connect query options with a logical
OR. For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>query-pr --category=baz --or --responsible=blee
</FONT></pre></td></tr></table></P><P>

prints PRs which have either a Category field of <SAMP>`baz'</SAMP> or a Responsible
field of <SAMP>`blee'</SAMP>.
</P><P>

It should be emphasized, however, that the use of these field-specific
options is strongly discouraged, since they exist only for compatibility
with older versions of GNATS and are likely to be deleted in the next
release.  The expressions specified by the <CODE>--expr</CODE> option are much more
flexible (see below).
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC22">2.4.1 Invoking <CODE>query-pr</CODE></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC23">2.4.2 Formatting <CODE>query-pr</CODE> output</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC24">2.4.3 Query expressions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC25">2.4.4 Example queries</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Invoking query-pr"></A>
<HR SIZE="6">
<A NAME="SEC22"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC21"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC23"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC21"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.4.1 Invoking <CODE>query-pr</CODE> </H3>
<!--docid::SEC22::-->
<P>

From the shell, simply type <KBD>query-pr</KBD>, followed by any search
parameters you wish to exercise.  From Emacs, type <KBD>M-x
query-pr</KBD>.  <CODE>query-pr</CODE> prompts you for search parameters in the
minibuffer.
</P><P>

<A NAME="IDX120"></A>
<CODE>query-pr</CODE> can also be accessed by electronic mail, if your version
of GNATS is configured for this.  To use this feature, simply send
mail to the address <SAMP>`query-pr@<VAR>your-site</VAR>'</SAMP> with command
line arguments or options in the <SAMP>`Subject:'</SAMP> line of the mail
header.  GNATS replies to your mail with the results of your query.
The default settings for the <CODE>query-pr</CODE> mail server are
</P><P>

<A NAME="IDX121"></A>
<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>--restricted --state="open|analyzed|feedback|suspended"
</FONT></pre></td></tr></table></P><P>

To override the <SAMP>`--state'</SAMP> parameter, specify
<SAMP>`--state=<VAR>state</VAR>'</SAMP> in the <CODE>Subject:</CODE> line of the mail
header.  You can not query on confidential Problem Reports by mail.
</P><P>

The usage for <CODE>query-pr</CODE> is:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>query-pr [--debug | -D] [--help | -h] [--version | -V]
         [--output <VAR>file</VAR> | -o <VAR>file</VAR>] [--list-databases]
         [--list-fields] [--list-input-fields]
         [--responsible-address <VAR>address</VAR>] [--field-type <VAR>type</VAR>]
         [--field-description <VAR>description</VAR>]
         [--valid-values <VAR>values</VAR>] [--format <VAR>format</VAR> | -f <VAR>format</VAR>]
         [--full | -F] [--summary | -q]
         [--database <VAR>database</VAR> | -d <VAR>database</VAR>] [--and | -&#38;]
         [--or | -|] [--expr <VAR>expr</VAR>] [PR Number]
</FONT></pre></td></tr></table></P><P>

Non-network-mode options:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>         [--print-sh-vars] [--print-directory-for-database]
</FONT></pre></td></tr></table></P><P>

Network-mode-only options:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>         [--host <VAR>host</VAR> | -H <VAR>host</VAR>] [--port <VAR>port</VAR>]
         [--user <VAR>user</VAR> | -v <VAR>user</VAR>] [--passwd <VAR>passwd</VAR> | -w <VAR>passwd</VAR>]
</FONT></pre></td></tr></table></P><P>

Deprecated Options:
<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>         [--list-categories | -j] [--list-states | -T]
         [--list-responsible | -k] [--list-submitters | -l]
         [--category <VAR>category</VAR> | -c <VAR>category</VAR>]
         [--synopsis <VAR>synopsis</VAR> | -y <VAR>synopsis</VAR>]
         [--confidential <VAR>confidential</VAR> | -C <VAR>confidential</VAR>]
         [--multitext <VAR>multitext</VAR> | -m <VAR>multitext</VAR>]
         [--originator <VAR>originator</VAR> | -O <VAR>originator</VAR>]
         [--release <VAR>release</VAR> | -A <VAR>release</VAR>]
         [--class <VAR>class</VAR> | -L <VAR>class</VAR>] [--cases <VAR>cases</VAR> | -E <VAR>cases</VAR>]
         [--quarter <VAR>quarter</VAR> | -Q <VAR>quarter</VAR>]
         [--keywords <VAR>keywords</VAR> | -K <VAR>keywords</VAR>]
         [--priority <VAR>priority</VAR> | -p <VAR>priority</VAR>]
         [--responsible <VAR>responsible</VAR> | -r <VAR>responsible</VAR>]
         [--restricted | -R] [--severity <VAR>severity</VAR> | -e <VAR>severity</VAR>]
         [--skip-closed | -x] [--sql | -i] [--sql2 | -I]
         [--state <VAR>state</VAR> | -s <VAR>state</VAR>]
         [--submitter <VAR>submitter</VAR> | -S <VAR>submitter</VAR>]
         [--text <VAR>text</VAR> | -t <VAR>text</VAR>]
         [--required-before <VAR>date</VAR> | -u <VAR>date</VAR>]
         [--required-after <VAR>date</VAR> | -U <VAR>date</VAR>]
         [--arrived-before <VAR>date</VAR> | -b <VAR>date</VAR>]
         [--arrived-after <VAR>date</VAR> | -a <VAR>date</VAR>]
         [--modified-before <VAR>date</VAR> | -B <VAR>date</VAR>]
         [--modified-after <VAR>date</VAR> | -M <VAR>date</VAR>]
         [--closed-before <VAR>date</VAR> | -z <VAR>date</VAR>]
         [--closed-after <VAR>date</VAR> | -Z <VAR>date</VAR>]
</FONT></pre></td></tr></table></P><P>

The options have the following meaning:
<DL COMPACT>

<DT><CODE>--help, -h</CODE>
<DD>Prints a help message.
<P>

<DT><CODE>--version, -V</CODE>
<DD>Displays the program version to stdout.
<P>

<DT><CODE>--output <VAR>file</VAR>, -o <VAR>file</VAR></CODE>
<DD>The results of the query will be placed in this file.
<P>

<DT><CODE>--database <VAR>database</VAR>, -d <VAR>database</VAR></CODE>
<DD>Specifies the database to be used for the query.  If no database is
specified, the database named default is assumed.  (This option
overrides the database specified in the <CODE>GNATSDB</CODE> environment
variable; see <A HREF="gnats_2.html#SEC12">2.1 Environment variables and GNATS tools</A> for more
information.)
<P>

<DT><CODE>--list-categories, -j</CODE>
<DD>Lists the available PR categories for the selected database.
<P>

<DT><CODE>--list-states, -T</CODE>
<DD>Lists the valid PR states for PRs in this database.
<P>

<DT><CODE>--list-responsible, -k</CODE>
<DD>Lists the users that appear in the database's responsible list.
<P>

<DT><CODE>--list-submitters, -l</CODE>
<DD>Lists the valid submitters for this database.
</DL>
<P>

The previous --list-* options are deprecated and may be removed in
future releases of GNATS; their functionality can be replaced with
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>query-pr --valid-values <VAR>field</VAR>
</FONT></pre></td></tr></table></P><P>

where <VAR>field</VAR> is one of <SAMP>`Category'</SAMP>, <SAMP>`Class'</SAMP>,
<SAMP>`Responsible'</SAMP>, <SAMP>`Submitter-Id'</SAMP>, or <SAMP>`State'</SAMP>.
</P><P>

<DL COMPACT>
<DT><CODE>--list-databases</CODE>
<DD>Lists the known databases.
<P>

<DT><CODE>--list-fields</CODE>
<DD>Lists the entire set of field names for PRs in the selected database.
<P>

<DT><CODE>--list-input-fields</CODE>
<DD>Lists the fields that should be provided when creating a new PR for the
currently-specified database.  The fields are listed in an order that
would make sense when used in a template or form.
<P>

<DT><CODE>--field-type <VAR>field</VAR></CODE>
<DD>Returns the data type contained in PR field field.  The current set of
data types includes <SAMP>`text'</SAMP>, <SAMP>`multitext'</SAMP>, <SAMP>`enum'</SAMP>,
<SAMP>`multienum'</SAMP>, <SAMP>`integer'</SAMP>, <SAMP>`date'</SAMP>, and
<SAMP>`text-with-regex-qualifier'</SAMP>.
<P>

<DT><CODE>--field-description <VAR>field</VAR></CODE>
<DD>Returns a human-readable description of the intended purpose of <VAR>field</VAR>.
<P>

<DT><CODE>--valid-values <VAR>field</VAR></CODE>
<DD>For fields of type <SAMP>`enum'</SAMP>, a list of valid values (one per line) is
returned.  Otherwise, a regular expression is returned that describes
the legal values in <VAR>field</VAR>.
<P>

<DT><CODE>--responsible-address <VAR>name</VAR></CODE>
<DD>The mail address of <VAR>name</VAR> is returned; <VAR>name</VAR> is assumed to be
a name either appearing in the database's responsible list, or is
otherwise a user on the system.
<P>

<DT><CODE>--print-sh-vars</CODE>
<DD>A set of <TT>`/bin/sh'</TT> variables is returned that describe the selected
database.  They include:
<P>

<CODE>GNATSDB</CODE>
</P><P>

The name of the currently-selected database.
</P><P>

<CODE>GNATSDB_VALID</CODE>
</P><P>

Set to 1 if the selected database is valid.
</P><P>

<CODE>GNATSDBDIR</CODE>
</P><P>

The directory  where  the  database  contents  are
stored.
</P><P>

<CODE>DEBUG_MODE</CODE>
</P><P>

Set to 1 if debug mode has been  enabled  for  the
database.
</P><P>

<CODE>DEFAULTCATEGORY</CODE>
</P><P>

The default category for PRs in the database.
</P><P>

<CODE>DEFAULTSTATE</CODE>
</P><P>

The default state for PRs in the database.
</P><P>

<DT><CODE>--print-directory-for-database</CODE>
<DD>Returns the directory where the selected database is located.
<P>

<DT><CODE>--format <VAR>format</VAR>, -f <VAR>format</VAR></CODE>
<DD>Used to specify the format of the output PRs, See <A HREF="gnats_2.html#SEC23">2.4.2 Formatting <CODE>query-pr</CODE> output</A> for a complete description.
<P>

<DT><CODE>--full, -F</CODE>
<DD>When printing PRs, the entre PR is displayed.  This is exactly
equivalent to
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>query-pr --format full
</FONT></pre></td></tr></table></P><P>

<DT><CODE>--summary, -q</CODE>
<DD>When printing PRs, a summary format is used.  This is exactly equivalent
to
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>query-pr --format <VAR>summary</VAR>
</FONT></pre></td></tr></table></P><P>

<DT><CODE>--debug, -D</CODE>
<DD>Enables debugging output for network queries.
<P>

<DT><CODE>--host <VAR>host</VAR>, -H <VAR>host</VAR></CODE>
<DD>Specifies the hostname of the gnatsd server to communicate with.  This
overrides the value in the <CODE>GNATSDB</CODE> environment variable.
<P>

<DT><CODE>--port <VAR>port</VAR></CODE>
<DD>Specifies the port number of the gnatsd server to communicate with.
This overrides the value in the <CODE>GNATSDB</CODE> environment variable.
<P>

<DT><CODE>--user <VAR>user</VAR>, -v <VAR>user</VAR></CODE>
<DD>Specifies the username to login with when connecting to the gnatsd
server.  This overrides the value in the <CODE>GNATSDB</CODE> environment
variable.
<P>

<DT><CODE>--passwd <VAR>passwd</VAR>, -w <VAR>passwd</VAR></CODE>
<DD>Specifies the password to login with when connecting to the gnatsd
server.  This overrides the value in the <CODE>GNATSDB</CODE> environment
variable.
<P>

<DT><CODE>--and, -&#38;, --or, -|</CODE>
<DD>These options are used when connecting multiple query operators
together.  They specify whether the previous and subsequent options are
to be logically ANDed or logically ORed.
<P>

<DT><CODE>--expr <VAR>expr</VAR></CODE>
<DD>Specifies a query expression to use when searching for PRs.  See section <A HREF="gnats_2.html#SEC24">2.4.3 Query expressions</A>.
</DL>
<P>

The remaining deprecated options are not described here, since their use
is fairly obvious and their functionality is completely replaced by the
use of the <CODE>--expr</CODE> option.
</P><P>

<A NAME="Formatting query-pr output"></A>
<HR SIZE="6">
<A NAME="SEC23"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC22"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC24"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC24"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC21"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.4.2 Formatting <CODE>query-pr</CODE> output </H3>
<!--docid::SEC23::-->
<P>

Printing formats for PRs are in one of three forms:
</P><P>

<DL COMPACT>
<DT><VAR>formatname</VAR>
<DD>This is a named format which is described by the database (specifically,
these formats are described in the <TT>`dbconfig'</TT> file associated with the
database).  The default configuration contains five such formats:
<SAMP>`standard'</SAMP>, <SAMP>`full'</SAMP>, <SAMP>`summary'</SAMP>, <SAMP>`sql'</SAMP>, and
<SAMP>`sql2'</SAMP>.
<P>

The first three are the ones most commonly used when performing queries.
standard is the format used by default if no other format is specified.
</P><P>

Use of the latter two are discouraged; they are merely kept for
historical purposes.  Other named formats may have been added by the
database administrator.
</P><P>

<DT><VAR>fieldname</VAR>
<DD>A single field name may appear here.  Only the contents of this field
will be displayed.
<P>

<DT><VAR>"printf string" fieldname fieldname ...</VAR>
<DD>This provides a very flexible mechanism for formatting PR output.  (The
formatting is identical to that provided by the named formats described
by the database configuration, See section <A HREF="gnats_4.html#SEC55">4.3.5 Named query definitions</A>.  The
<VAR>printf string</VAR> can contain the following % sequences:
<P>

<CODE>%[positionalspecifiers]s</CODE>: Prints the field as a string.  The
positional specifiers are similar to those of printf, as +, - and digit
qualifiers can be used to force a particular alignment of the field
contents.
</P><P>

<CODE>%[positionalspecifiers]S</CODE>: Similar to <CODE>%s</CODE>, except that the
field contents are terminated at the first space character.
</P><P>

<CODE>%[positionalspecifiers]d</CODE>: Similar to <CODE>%s</CODE>, except that the
field contents are written as a numeric value.  For integer fields, the
value is written as a number.  For enumerated fields, the field is
converted into a numeric equivalent (i.e. if the field can have two
possible values, the result will be either 1 or 2).  For date fields,
the value is written as seconds since Jan 1, 1970.
</P><P>

<CODE>%F</CODE>: The field is written as it would appear within a PR, complete
with field header.
</P><P>

<CODE>%D</CODE>: For date fields, the date is written in a standard GNATS
format.
</P><P>

<CODE>%Q</CODE>: For date fields, the date is written in an arbitrary "SQL"
format.
</DL>
<P>

<A NAME="Query expressions"></A>
<HR SIZE="6">
<A NAME="SEC24"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC23"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC25"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC25"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC21"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.4.3 Query expressions </H3>
<!--docid::SEC24::-->
<P>

Query expressions are used to select specific PRs based on their field
contents.  The general form is
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>fieldname|"value" operator fieldname|"value" [booleanop ...]
</FONT></pre></td></tr></table></P><P>

<VAR>value</VAR> is a literal string or regular expression; it must be
surrounded by double quotes, otherwise it is interpreted as a fieldname.
</P><P>

<VAR>fieldname</VAR> is the name of a field in the PR.
</P><P>

<VAR>operator</VAR> is one of:
</P><P>

<DL COMPACT>
<DT><CODE>=</CODE>
<DD>The value of the left-hand side of the expression must exactly match the
regular expression on the right-hand side of the expression.
See section <A HREF="gnats_8.html#SEC101">Querying using regular expressions</A>.
<P>

<DT><CODE>~</CODE>
<DD>Some portion of the left-hand side of the expression must match the
regular expression on the right-hand side.
<P>

<DT><CODE>==</CODE>
<DD>The value of the left-hand side must be equal to the value on the
right-hand side of the expression.
<P>

The equality of two values depends on what type of data is stored in the
field(s) being queried.  For example, when querying a field containing
integer values, literal strings are interpreted as integers.  The query
expression
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>Number == "0123"
</FONT></pre></td></tr></table></P><P>

is identical to
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>Number == "123"
</FONT></pre></td></tr></table></P><P>

as the leading zero is ignored.  If the values were treated as strings
instead of integers, then the two comparisons would return different
results.
</P><P>

<DT><CODE>!=</CODE>
<DD>The not-equal operator. Produces the opposite result of the == operator.
<P>

<DT><CODE>&#60;,&#62;</CODE>
<DD>The left-hand side must have a value less than or greater than the
right-hand side.  Comparisons are done depending on the type of data
being queried; in particular, integer fields and dates use a numeric
comparison, and enumerated fields are ordered depending on the numeric
equivalent of their enumerated values.
</DL>
<P>

<VAR>booleanop</VAR> is either <SAMP>`|'</SAMP> (logical or), or <SAMP>`&#38;'</SAMP> (logical
and).  The query expression
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>Category="baz" | Responsible="blee"
</FONT></pre></td></tr></table></P><P>

selects all PRs with a Category field of <SAMP>`baz'</SAMP> or a Responsible
field of <SAMP>`blee'</SAMP>.
</P><P>

The not operator <SAMP>`!'</SAMP> may be used to negate a test:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>! Category="foo"
</FONT></pre></td></tr></table></P><P>

searches for PRs where the category is not equal to the regular
expression foo.
</P><P>

Parentheses may be used to force a particular interpretation of the
expression:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>!(Category="foo" & Submitter-Id="blaz")
</FONT></pre></td></tr></table></P><P>

skips PRs where the Category field is equal to <SAMP>`foo'</SAMP> and the
Submitter-Id field is equal to <SAMP>`blaz'</SAMP>.  Parentheses may be nested
to any arbitrary depth.
</P><P>

Fieldnames can be specified in several ways.  The simplest and most
obvious is just a name:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>Category="foo"
</FONT></pre></td></tr></table></P><P>

which checks the value of the category field for the value <VAR>foo</VAR>.
</P><P>

A fieldname qualifier may be prepended to the name of the field; a colon
is used to separate the qualifier from the name.  To refer directly to a
builtin field name:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>builtin:Number="123"
</FONT></pre></td></tr></table></P><P>

In this case, <SAMP>`Number'</SAMP> is interpreted as the builtin name of the
field to
check.  (This is useful if the fields have been renamed.  For further
discussion of builtin field names, see <A HREF="gnats_4.html#SEC50">The <CODE>dbconfig</CODE> file</A>.
</P><P>

To scan all fields of a particular type, the <VAR>fieldtype</VAR> qualifier
may be
used:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>fieldtype:Text="bar"
</FONT></pre></td></tr></table></P><P>

This searches all text fields for the regular expression <SAMP>`bar'</SAMP>.
</P><P>

Note that it is not required that the right-hand side of the expression
be a literal string.  To query all PRs where the PR has been modified
since it was closed, the expression
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>Last-Modified != Closed-Date
</FONT></pre></td></tr></table></P><P>

will work; for each PR, it compares the value of its Last-Modified field
against its Closed-Date field, and returns those PRs where the values
differ.  However, this query will also return all PRs with empty
Last-Modified or Closed-Date fields.  To further narrow the search:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>Last-Modified != Closed-Date &#38; Last-Modified != "" & Closed-Date != ""
</FONT></pre></td></tr></table></P><P>

In general, comparing fields of two different types (an integer field
against a date field, for example) will probably not do what you want.
</P><P>

Also, a field specifier may be followed by the name of a subfield in
braces:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>State[type] != "closed"
</FONT></pre></td></tr></table></P><P>

or even
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>builtin:State[type] != "closed"
</FONT></pre></td></tr></table></P><P>

Subfields are further discussed in <A HREF="gnats_4.html#SEC50">The <CODE>dbconfig</CODE> file</A>.
</P><P>

<A NAME="Example queries"></A>
<HR SIZE="6">
<A NAME="SEC25"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC24"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC21"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.4.4 Example queries </H3>
<!--docid::SEC25::-->
<P>

The following simple query:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>query-pr --expr 'Category~"rats" & State~"analyzed"
                 &#38; Responsible~"fred"'
</FONT></pre></td></tr></table></P><P>

yields all PRs in the database which contain the field values:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>&#62;Category:     rats         <EM>and</EM>
&#62;Responsible:  fred         <EM>and</EM>
&#62;State:        analyzed
</FONT></pre></td></tr></table></P><P>

The following query:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>query-pr --expr 'State~"open|analyzed"'
</FONT></pre></td></tr></table></P><P>

yields all PRs in the database whose <SAMP>`&#62;State:'</SAMP> values match either
<SAMP>`open'</SAMP> or <SAMP>`analyzed'</SAMP> (see section <A HREF="gnats_8.html#SEC101">Querying using regular expressions</A>.  This search is useful as a daily report that lists all
Problem Reports which require attention.
</P><P>

The following query:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>query-pr --expr 'fieldtype:Text="The quick.*brown fox"'
</FONT></pre></td></tr></table></P><P>

yields all PRs whose TEXT fields contain the text <SAMP>`The quick'</SAMP>
followed by <SAMP>`brown fox'</SAMP> within the same field.
See section <A HREF="gnats_8.html#SEC101">Querying using regular expressions</A>, which also contains
further useful examples of query expressions.
</P><P>

<A NAME="Emacs"></A>
<HR SIZE="6">
<A NAME="SEC26"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC25"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC27"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.5 The Emacs interface to GNATS </H2>
<!--docid::SEC26::-->
<P>

Emacs interface to GNATS provides basic access to GNATS
databases, i.e. sending, editing, and querying Problem Reports.  It
also defines a simple major mode for editing <TT>`dbconfig'</TT> files.
</P><P>

This section provides an overview of using GNATS with Emacs.  It
does not describe the use of Emacs itself, for detailed instructions
on using Emacs, see section `Top' in <CITE>GNU Emacs</CITE>.  For
installation instructions of the GNATS Emacs mode, see
<A HREF="gnats_3.html#SEC38">3.2 Installing the utilities</A>.
</P><P>

Please note the Emacs interface was completely rewritten between
GNATS 3 and GNATS 4.  It now uses <CODE>gnatsd</CODE>,
<A HREF="gnats_6.html#SEC89">B. The GNATS network server -- <CODE>gnatsd</CODE></A>, exclusively for its operations and uses modern Emacs
features like faces.  Its features are not complete though, you can
send your suggestions and patches to the appropriate GNATS
mailing list, <A HREF="gnats_9.html#SEC102">E. GNATS support</A>.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC27">2.5.1 Viewing Problem Reports</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Viewing PRs by their number.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC28">2.5.2 Querying Problem Reports</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Querying the database.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC29">2.5.3 Submitting new Problem Reports</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Submitting new PRs.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC30">2.5.4 Editing Problem Reports</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Editing PRs.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC31">2.5.5 The Problem Report editing buffer</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The editing buffer.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC32">2.5.6 Changing the database</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Changing the working database.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC33">2.5.7 dbconfig mode</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Major mode for dbconfig files.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC34">2.5.8 Other commands</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Miscellaneous commands.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_2.html#SEC35">2.5.9 Customization</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Customizing the Emacs interface.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Emacs viewing"></A>
<HR SIZE="6">
<A NAME="SEC27"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC28"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.5.1 Viewing Problem Reports </H3>
<!--docid::SEC27::-->
<P>

<A NAME="IDX122"></A>
To view a particular Problem Report, use the command <KBD>M-x
view-pr</KBD>.  It asks for a Problem Report number and displays that
Problem Report.
</P><P>

<A NAME="IDX123"></A>
The displayed buffer is put in the view mode, section `Misc File Ops' in <CITE>GNU Emacs</CITE>.  If you decide to edit the displayed Problem
Report, use the command <KBD>e</KBD> (<CODE>gnats-view-edit-pr</CODE>).
</P><P>

<DL COMPACT>
<A NAME="IDX124"></A>
<DT><CODE>gnats-view-mode-hook</CODE>
<DD>Hook run when <CODE>gnats-view-mode</CODE> is entered.
</DL>
<P>

<A NAME="Emacs querying"></A>
<HR SIZE="6">
<A NAME="SEC28"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC27"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC29"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC29"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.5.2 Querying Problem Reports </H3>
<!--docid::SEC28::-->
<P>

<A NAME="IDX125"></A>
Querying the database is performed by the <KBD>M-x query-pr</KBD> command.
The command prompts for the query expression, <A HREF="gnats_2.html#SEC24">2.4.3 Query expressions</A>,
and displays a buffer with the list of the matching Problem Reports.
</P><P>

The list of the Problem Reports is displayed in the <SAMP>`summary'</SAMP>
query format, <A HREF="gnats_2.html#SEC23">2.4.2 Formatting <CODE>query-pr</CODE> output</A>.  Currently, the
display format cannot be changed and it must output each Problem
Report's number in the first column.
</P><P>

The Problem Report list buffer is put in the view mode, section `Misc File Ops' in <CITE>GNU Emacs</CITE>.  You can use most of the standard view mode
commands in it.  Additionally, the following special commands are
available:
</P><P>

<DL COMPACT>
<A NAME="IDX126"></A>
<DT><KBD>v</KBD>
<DD><DT><KBD>RET</KBD>
<DD><DT><KBD>mouse-2</KBD>
<DD>View the current Problem Report (<CODE>gnats-query-view-pr</CODE>),
<A HREF="gnats_2.html#SEC27">2.5.1 Viewing Problem Reports</A>.
<P>

<A NAME="IDX127"></A>
<DT><KBD>e</KBD>
<DD>Edit the current Problem Report (<CODE>gnats-query-edit-pr</CODE>),
<A HREF="gnats_2.html#SEC30">2.5.4 Editing Problem Reports</A>.
<P>

<A NAME="IDX128"></A>
<DT><KBD>g</KBD>
<DD>Update the Problem Report list (<CODE>gnats-query-reread</CODE>).  The last
performed query is executed again and the buffer is filled with the
new results.
<P>

<A NAME="IDX129"></A>
<DT><KBD>G</KBD>
<DD>Perform new query (<CODE>query-pr</CODE>).
<P>

<A NAME="IDX130"></A>
<DT><KBD>s</KBD>
<DD>Send new Problem Report (<CODE>send-pr</CODE>), <A HREF="gnats_2.html#SEC29">2.5.3 Submitting new Problem Reports</A>.
<P>

<A NAME="IDX131"></A>
<DT><KBD>D</KBD>
<DD>Change the current database (<CODE>gnats-change-database</CODE>), <A HREF="gnats_2.html#SEC32">2.5.6 Changing the database</A>.
<P>

<A NAME="IDX132"></A>
<DT><KBD>q</KBD>
<DD>Bury buffer, the buffer is put at the end of the list of all buffers.
This is useful for quick escape of the buffer, without killing it.
</DL>
<P>

<A NAME="IDX133"></A>
If the value of the variable <VAR>gnats-query-reverse-listing</VAR> is
non-<CODE>nil</CODE>, the listing appears in the reversed order, i.e. with
the Problem Reports of the highest number first, in the buffer.
</P><P>

Similarly to other GNATS Emacs modes, there is a hook available
for the Problem Report list.
</P><P>

<DL COMPACT>
<A NAME="IDX134"></A>
<DT><CODE>gnats-query-mode-hook</CODE>
<DD>Hook run when <CODE>gnats-query-mode</CODE> is entered.
</DL>
<P>

<A NAME="Emacs submitting"></A>
<HR SIZE="6">
<A NAME="SEC29"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC28"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC30"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC30"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.5.3 Submitting new Problem Reports </H3>
<!--docid::SEC29::-->
<P>

<A NAME="IDX135"></A>
You can submit new Problem Reports with the command <KBD>M-x send-pr</KBD>.
The command puts you to the problem editing buffer, <A HREF="gnats_2.html#SEC30">2.5.4 Editing Problem Reports</A>.  The buffer is prefilled with the initial report fields and
their default values, if defined.  You can use the usual Problem
Report editing commands, <A HREF="gnats_2.html#SEC30">2.5.4 Editing Problem Reports</A>.  When you have filled in
all the fields, you can send the Problem Report by presing <KBD>C-c
C-c</KBD>.
</P><P>

If you run <KBD>M-x send-pr</KBD> with a prefix argument, it runs the
<CODE>gnats-change-database</CODE> command before putting you to the editing
buffer, <A HREF="gnats_2.html#SEC32">2.5.6 Changing the database</A>.
</P><P>

You can set the following variables to get some fields pre-filled:
</P><P>

<DL COMPACT>
<A NAME="IDX136"></A>
<DT><VAR>gnats-default-organization</VAR>
<DD>Default value of the <SAMP>`Organization'</SAMP> field used in new Problem Reports.
<P>

<A NAME="IDX137"></A>
<DT><VAR>gnats-default-submitter</VAR>
<DD>Default value of the <SAMP>`Submitter-Id'</SAMP> field used in new Problem Reports.
</DL>
<P>

<A NAME="Emacs editing"></A>
<HR SIZE="6">
<A NAME="SEC30"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC29"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC31"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC31"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.5.4 Editing Problem Reports </H3>
<!--docid::SEC30::-->
<P>

<A NAME="IDX138"></A>
To edit a particular Problem Report, use the command <KBD>M-x
edit-pr</KBD>.  It asks for a Problem Report number and puts the given
Problem Report in the editing buffer.  See section <A HREF="gnats_2.html#SEC31">2.5.5 The Problem Report editing buffer</A>,
for information how to edit the Problem Report in the buffer and how
to submit your changes.
</P><P>

Note you can also start editing of a selected Problem Report directly
from within the viewing buffer, <A HREF="gnats_2.html#SEC27">2.5.1 Viewing Problem Reports</A>, or the query
result buffer, <A HREF="gnats_2.html#SEC28">2.5.2 Querying Problem Reports</A>.
</P><P>

<A NAME="Emacs editing buffer"></A>
<HR SIZE="6">
<A NAME="SEC31"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC30"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC32"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC32"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.5.5 The Problem Report editing buffer </H3>
<!--docid::SEC31::-->
<P>

When you invoke a Problem Report editing command, the Problem Report
is put into a special editing buffer.  The Problem Report is formatted
similarly to the <CODE>query-pr -F</CODE> output, <A HREF="gnats_2.html#SEC23">2.4.2 Formatting <CODE>query-pr</CODE> output</A>.  Field identifiers are formatted as
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#62;Field:
</pre></td></tr></table></P><P>

with the text of the field following the identifier on the same line
for single-line fields or starting on the next line for multi-line
fields.
</P><P>

The Problem Report editing mode tries to prevent you from violating
the Problem Report format and the constraints put on the possible
field values.  Generally, you can use usual editing commands, some of
them have a slightly modified behavior though.  (If you encounter a
very strange behavior somewhere, please report it as a bug,
<A HREF="gnats_9.html#SEC102">E. GNATS support</A>.)
</P><P>

<A NAME="IDX139"></A>
<A NAME="IDX140"></A>
You can move between fields easily by pressing the <KBD>TAB</KBD>
(<CODE>gnats-next-field</CODE>) or <KBD>M-TAB</KBD>
(<CODE>gnats-previous-field</CODE>) keys.
</P><P>

The field tags are read-only and you cannot edit them nor delete them.
If you want to "remove" a field, just make its value empty.
</P><P>

Editing a field value depends on the type of the edited field,
<A HREF="gnats_4.html#SEC53">4.3.3 Field datatypes</A>.  For text fields, you can edit the value
directly, assuming you preserve the rule about single-line and
multi-line values mentioned above.
</P><P>

For enumerated fields, you cannot edit the value directly.  You can
choose it from the list of the allowed values, either from the menu
popped up by pressing the middle mouse button or from within
minibuffer by pressing any key on the field's value.  If the pressed
key matches any of the allowed field values, that value is put as the
default value after the minibuffer prompt.  You can also cycle through
the allowed field values directly in the editing buffer using the
<CODE>SPACE</CODE> key.  Enumerated field values are marked by a special
face to not confuse you; you must have enabled font lock mode to
benefit from this feature, section `Font Lock' in <CITE>GNU Emacs</CITE>.
</P><P>

Some field values can be read-only, you cannot edit them at all.
</P><P>

<A NAME="IDX141"></A>
Once you have edited the Problem Report as needed, you can send it to
the server with the <KBD>C-c C-c</KBD> command
(<CODE>gnats-apply-or-submit</CODE>).  Successful submission is reported by
a message and the buffer modification flag in mode line is cleared.
Then you can either kill the buffer or continue with further
modifications.
</P><P>

<DL COMPACT>
<A NAME="IDX142"></A>
<DT><CODE>gnats-edit-mode-hook</CODE>
<DD>Hook run when <CODE>gnats-edit-mode</CODE> is entered.
</DL>
<P>

<A NAME="Emacs and databases"></A>
<HR SIZE="6">
<A NAME="SEC32"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC31"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC33"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC33"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.5.6 Changing the database </H3>
<!--docid::SEC32::-->
<P>

<A NAME="IDX143"></A>
By default, the Emacs interface connects to the default database,
<A HREF="gnats_4.html#SEC49">4.2 The <CODE>databases</CODE> file</A>.  If you want to connect to another database, use
the command <KBD>M-x gnats-change-database</KBD>.  It will ask you for the
database name to use, server and port it can be accessed on, and your
login name.
</P><P>

<A NAME="IDX144"></A>
If you want to use the <CODE>gnatsd</CODE> command, <A HREF="gnats_6.html#SEC89">B. The GNATS network server -- <CODE>gnatsd</CODE></A>,
directly, without connecting to a remote server or the localhost
connection port, provide your local file system full path to
<CODE>gnatsd</CODE> as the server name.  Port number does not matter in
this case.
</P><P>

<A NAME="IDX145"></A>
If the database requires a password to allow you the access to it, you
are prompted for the password the first time you connect to the
database.  If you provide an invalid password, you cannot connect to
the database anymore and you have to run the <KBD>M-x
gnats-change-database</KBD> command again.
</P><P>

<A NAME="dbconfig mode"></A>
<HR SIZE="6">
<A NAME="SEC33"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC32"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC34"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC34"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.5.7 dbconfig mode </H3>
<!--docid::SEC33::-->
<P>

<A NAME="IDX146"></A>
<A NAME="IDX147"></A>
The Emacs interface defines a simple major mode
<CODE>gnats-dbconfig-mode</CODE> for editing <TT>`dbconfig'</TT> files,
<A HREF="gnats_4.html#SEC50">4.3 The <CODE>dbconfig</CODE> file</A>.  It defines basic mode attributes like character
syntax and font lock keywords, it does not define any special commands
now.
</P><P>

<DL COMPACT>
<A NAME="IDX148"></A>
<DT><CODE>gnats-dbconfig-mode-hook</CODE>
<DD>Hook run when <CODE>gnats-dbconfig-mode</CODE> is entered.
</DL>
<P>

<A NAME="Other Emacs commands"></A>
<HR SIZE="6">
<A NAME="SEC34"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC33"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC35"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC35"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.5.8 Other commands </H3>
<!--docid::SEC34::-->
<P>

<DL COMPACT>
<A NAME="IDX149"></A>
<DT><KBD>M-x unlock-pr</KBD>
<DD>Ask for a Problem Report number and unlock that Problem Report.  This
function is useful if connection to a GNATS server was
interrupted during an editing operation and further modifications of
the Problem Report are blocked by a stealth lock.
</DL>
<P>

<A NAME="Emacs customization"></A>
<HR SIZE="6">
<A NAME="SEC35"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC34"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC26"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 2.5.9 Customization </H3>
<!--docid::SEC35::-->
<P>

All the user variables can be customized in the customization group
<CODE>gnats</CODE>, section `Easy customization' in <CITE>GNU Emacs</CITE>.
</P><P>

<A NAME="Installation"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_2.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC36"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_10.html#SEC103">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
by <I>Yngve Svendsen</I> on <I>January, 9  2002</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
