<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on January, 19  2001 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>Keeping Track: Installation</TITLE>

<META NAME="description" CONTENT="Keeping Track: Installation">
<META NAME="keywords" CONTENT="Keeping Track: Installation">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

<LINK REL="STYLESHEET" HREF="../../styles/common.css"></HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC55"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC54"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC56"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_3.html#SEC31"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_5.html#SEC62"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_9.html#SEC70">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> A. Installing GNATS </H1>
<!--docid::SEC55::-->
<P>

<A NAME="IDX167"></A>
<A NAME="IDX168"></A>
<A NAME="IDX169"></A>
<A NAME="IDX170"></A>
</P><P>

See section <A HREF="gnats_5.html#SEC62">Where the tools and utilities reside</A>.
</P><P>

There are several steps you need to follow to fully configure and
install GNATS on your system.  You need <CODE>root</CODE> access in order
to create a new account for <CODE>gnats</CODE> and to install the GNATS
utilities.  You may need <CODE>root</CODE> access on some systems in order to
set up mail aliases and to allow this new account access to
<CODE>cron</CODE> and <CODE>at</CODE>.
</P><P>

If you are updating an older version of GNATS rather than installing
from scratch, see <A HREF="gnats_4.html#SEC61">Upgrading from older versions</A>.
</P><P>

In order to build GNATS, you will need to have GNU <CODE>m4</CODE>
installed; most systems ship with a version of <CODE>m4</CODE> that is not able to
work with the <TT>`config.m4'</TT> file.
</P><P>

To build GNATS, you must:
</P><P>

<UL>
<LI>
Run <CODE>configure</CODE>, with correct options if the defaults are
unsuitable for your site.  See section <A HREF="gnats_4.html#SEC56">Configuring and compiling the software</A>.  Default installation locations are in
<A HREF="gnats_5.html#SEC62">Where GNATS lives</A>.
<P>

<LI>
Compile the GNATS programs on your system.  See section <A HREF="gnats_4.html#SEC56">Configuring and compiling the software</A>.
<P>

<LI>
Install the GNATS tools and utilities locally, and install the user
tools on every machine in your local network.  See section <A HREF="gnats_4.html#SEC57">Installing the utilities</A>.
<P>

<LI>
Set up mail aliases for GNATS.  See section <A HREF="gnats_4.html#SEC58">Setting up mail aliases</A>.
<P>

<LI>
Install the GNATS user tools (<CODE>query-pr</CODE>, <CODE>nquery-pr</CODE>, <CODE>edit-pr</CODE>,
<CODE>send-pr</CODE>) around your network.  See section <A HREF="gnats_4.html#SEC60">Installing the user tools</A>.
<P>

<LI>
Install the GNATS daemon <TT>`gnatsd'</TT>.  See section <A HREF="gnats_4.html#SEC59">A.4 Installing the daemon</A>.
<P>

<LI>
Update the local configuration files
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>config      categories  submitters  responsible  gnatsd.conf  gnatsd.access
states      classes     addresses
</FONT></pre></td></tr></table></P><P>

in <TT>`<VAR>GNATS_ROOT</VAR>/gnats-adm'</TT>.  See section <A HREF="gnats_3.html#SEC33">Changing your local configuration</A>.
</P><P>

<LI>
Create a distribution of <CODE>send-pr</CODE> for submitters outside your
organization.  See section <A HREF="gnats_3.html#SEC48">Configuring <CODE>send-pr</CODE> for the outside world</A>.
</UL>
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_4.html#SEC56">A.1 Configuring and compiling the software</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_4.html#SEC57">A.2 Installing the utilities</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_4.html#SEC58">A.3 Setting up mail aliases</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_4.html#SEC59">A.4 Installing the daemon</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_4.html#SEC60">A.5 Installing the user tools</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats_4.html#SEC61">A.6 Upgrading from older versions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Configure and make"></A>
<HR SIZE="6">
<A NAME="SEC56"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC55"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC57"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC55"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC55"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_5.html#SEC62"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_9.html#SEC70">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> A.1 Configuring and compiling the software </H2>
<!--docid::SEC56::-->
<P>

<OL>
<LI>
First, unpack your distribution.  We provide source code in a <CODE>tar</CODE>
file which was compressed using <CODE>gzip</CODE>.  The code can be extracted
into a directory <VAR>unpackdir</VAR> using
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>cd <VAR>unpackdir</VAR>
tar zxvf gnats-3.113.tar.z
</FONT></pre></td></tr></table></P><P>

The sources reside in a directory called <TT>`gnats-3.113'</TT>
when unpacked.  We call this the <EM>top level</EM> of the source
directory, or <EM>srcdir</EM>.  The sources for the GNATS tools are in
the subdirectory <TT>`gnats-3.113/gnats/*'</TT>.  Lists of files
included in the distribution are in each directory in the file
<TT>`MANIFEST'</TT>.
</P><P>

<A NAME="IDX171"></A>
<A NAME="IDX172"></A>
<LI>
You may wish to alter the installation directory for the Emacs lisp
files.  If your Emacs lisp library is not in
<TT>`<VAR>prefix</VAR>/share/emacs/site-lisp'</TT>, edit the files
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre><VAR>srcdir</VAR>/gnats/Makefile.in   <EM>and</EM>
<VAR>srcdir</VAR>/send-pr/Makefile.in
</FONT></pre></td></tr></table></P><P>

Change the variable <SAMP>`lispdir'</SAMP> from <SAMP>`$(datadir)/emacs/site-lisp'</SAMP> to
the directory containing your Emacs lisp library.  For information on
<VAR>prefix</VAR>, see <A HREF="gnats_5.html#SEC63"><VAR>prefix</VAR></A>.
</P><P>

<LI>
Run <CODE>configure</CODE>.  You can nearly always run <CODE>configure</CODE> with
the command
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>./configure --with-full-gnats
</pre></td></tr></table></P><P>

and the "Right Thing" happens:
</P><P>

<UL>
<LI>
GNATS is configured in the same directory you unpacked it in;
<P>

<LI>
when built, GNATS runs on the machine you're building it on;
<P>

<LI>
when installed, files are installed under <TT>`/usr/local'</TT>
(see section <A HREF="gnats_5.html#SEC62">Where GNATS lives</A>).
<P>

<LI>
GNATS operates by default behavior (see section <A HREF="gnats_3.html#SEC34">Default behavior</A>).
</UL>
<P>

<A NAME="IDX173"></A>
The full usage for <CODE>configure</CODE> is:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>configure [ --with-full-gnats ]
          [ --prefix=<VAR>prefix</VAR> ]
          [ --exec-prefix=<VAR>exec-prefix</VAR> ]
          [ --with-gnats-root=<VAR>GNATS_ROOT</VAR> ]
          [ --with-gnats-server=<VAR>hostname</VAR> ]
          [ --with-gnats-service=<VAR>service-name</VAR> ]
          [ --with-gnats-user=<VAR>username</VAR> ]
          [ --with-gnats-port=<VAR>port-number</VAR> ]
          [ --verbose ]
</FONT></pre></td></tr></table></P><P>

<DL COMPACT>
<A NAME="IDX174"></A>
<DT><CODE>--with-full-gnats</CODE>
<DD>All programs are to be built; this includes the user utilities, the
administrative utilities, and the internal utilities.  Use this when
configuring the utilities for the machine where GNATS is to run.
Omit it when building only the user utilities for other machines on your
network; see <A HREF="gnats_4.html#SEC60">Installing the user tools</A>.
<P>

<A NAME="IDX175"></A>
<DT><CODE>--prefix=<VAR>prefix</VAR></CODE>
<DD>All host-independent programs and files are to be installed under
<VAR>prefix</VAR>.  (Host-dependent programs and files are also installed in
<VAR>prefix</VAR> by default.)  The default for <VAR>prefix</VAR> is
<TT>`/usr/local'</TT>.  See section <A HREF="gnats_5.html#SEC62">Where GNATS lives</A>.
<P>

<A NAME="IDX176"></A>
<DT><CODE>--exec-prefix=<VAR>exec-prefix</VAR></CODE>
<DD>All host-dependent programs and files are to be installed under
<VAR>exec-prefix</VAR>.  The default for <VAR>exec-prefix</VAR> is <VAR>prefix</VAR>.
See section <A HREF="gnats_5.html#SEC62">Where GNATS lives</A>.
<P>

<A NAME="IDX177"></A>
<DT><CODE>--with-gnats-root=<VAR>GNATS_ROOT</VAR></CODE>
<DD>The database and its data files are to be installed into
<VAR>GNATS_ROOT</VAR>.  The default for <VAR>GNATS_ROOT</VAR> is
<TT>`<VAR>prefix</VAR>/share/gnats/gnats-db'</TT>.  See section <A HREF="gnats_5.html#SEC62">Where GNATS lives</A>.
<P>

<A NAME="IDX178"></A>
<DT><CODE>--with-gnats-server=<VAR>hostname</VAR></CODE>
<DD>Set <VAR>hostname</VAR> to be the GNATS network server.
<P>

<A NAME="IDX179"></A>
<DT><CODE>--with-gnats-service=<VAR>service-name</VAR></CODE>
<DD>Set <VAR>service-name</VAR> to be the GNATS network service.
<P>

<A NAME="IDX180"></A>
<DT><CODE>--with-gnats-user=<VAR>username</VAR></CODE>
<DD>Set <VAR>username</VAR> to be the user name for GNATS from the passwd file.
<P>

<A NAME="IDX181"></A>
<DT><CODE>--with-gnats-port=<VAR>port-number</VAR></CODE>
<DD>Set the server port to be <VAR>port-number</VAR> if the service doesn't register.
<P>

<DT><CODE>--verbose</CODE>
<DD>Give verbose output while <CODE>configure</CODE> runs.
</DL>
<P>

See section `Using <CODE>configure</CODE>' in <CITE>Cygnus configure</CITE>.
</P><P>

<A NAME="IDX182"></A>
<A NAME="IDX183"></A>
You can build GNATS in a different directory (<VAR>objdir</VAR>) from the
source code by calling the <CODE>configure</CODE> program from the new
directory, as in
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>mkdir <VAR>objdir</VAR>
cd <VAR>objdir</VAR>
<VAR>srcdir</VAR>/configure <small>...</small>
</FONT></pre></td></tr></table></P><P>

By default, <CODE>make</CODE> compiles the programs in the same directory
as the sources (<VAR>srcdir</VAR>).  Emacs lisp files are byte-compiled if
<CODE>make</CODE> can find Emacs on your local system.
</P><P>

<LI>
Run 
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>make all info
</FONT></pre></td></tr></table></P><P>

from the directory where <CODE>configure</CODE> created a <TT>`Makefile'</TT>
(this is <VAR>objdir</VAR> if you used it, otherwise <VAR>srcdir</VAR>.)  These
targets indicate:
</P><P>

<DL COMPACT>
<DT><CODE>all</CODE>
<DD>Compile all programs
<P>

<DT><CODE>info</CODE>
<DD>Create <SAMP>`info'</SAMP> files using <CODE>makeinfo</CODE>.
</DL>
</OL>
<P>

<A NAME="Installing utils"></A>
<HR SIZE="6">
<A NAME="SEC57"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC56"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC58"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC58"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC55"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_5.html#SEC62"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_9.html#SEC70">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> A.2 Installing the utilities </H2>
<!--docid::SEC57::-->
<P>

The following steps are necessary for a complete installation.  You may
need <CODE>root</CODE> access for these.
</P><P>

<OL>
<LI>
<A NAME="IDX184"></A>
Create an account for a user named <CODE>gnats</CODE>.  This user must have an
entry in the file <TT>`/etc/passwd'</TT>.  The home directory for this
account should be the same directory you specified for <VAR>GNATS_ROOT</VAR>.
Also, the default <CODE>PATH</CODE> for this
user should contain <TT>`<VAR>exec-prefix</VAR>/bin'</TT> and
<TT>`<VAR>exec-prefix</VAR>/libexec/gnats'</TT>.
<P>

<LI>
Install the utilities by
invoking
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>make install install-info
</FONT></pre></td></tr></table></P><P>

These targets indicate:
</P><P>

<DL COMPACT>
<DT><CODE>install</CODE>
<DD>Installs all programs into their configured locations
(see section <A HREF="gnats_5.html#SEC62">Where GNATS lives</A>).
<P>

<DT><CODE>install-info</CODE>
<DD>Installs <SAMP>`info'</SAMP> files into their configured locations
(see section <A HREF="gnats_5.html#SEC62">Where GNATS lives</A>).
</DL>
<P>

After you have installed GNATS, you can remove the object files with
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>make clean
</FONT></pre></td></tr></table></P><P>

<A NAME="IDX185"></A>
<A NAME="IDX186"></A>
<A NAME="IDX187"></A>
<LI>
Place the following lines in the file <TT>`default.el'</TT> in your Emacs
lisp library, or instruct your local responsible parties to place the
lines in their <TT>`.emacs'</TT>:
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>(autoload 'edit-pr "gnats" 
   "Command to edit a problem report." t)
(autoload 'view-pr "gnats"
   "Command to view a problem report." t)
(autoload 'unlock-pr "gnats"
   "Unlock a problem report." t)
(autoload 'query-pr "gnats"
   "Command to query information about problem reports." t)
(autoload 'send-pr-mode "send-pr"
   "Major mode for sending problem reports." t)
(autoload 'send-pr "send-pr"
   "Command to create and send a problem report." t)
</FONT></pre></td></tr></table></P><P>

Emacs lisp files are byte-compiled if <CODE>make</CODE> can find Emacs on your
local system.
</P><P>

<A NAME="IDX188"></A>
<A NAME="IDX189"></A>
<LI>
Allow the new user <CODE>gnats</CODE> access to <CODE>cron</CODE> and <CODE>at</CODE>.  To
do this, add the name <CODE>gnats</CODE> to the files <TT>`cron.allow'</TT> and
<TT>`at.allow'</TT>, which normally reside in the directory
<TT>`/var/spool/cron'</TT>.  If these files do not exist, make sure
<CODE>gnats</CODE> does not appear in either of the files <TT>`cron.deny'</TT>
and <TT>`at.deny'</TT> (in the same directory).
<P>

For the following steps, log in as <CODE>gnats</CODE>.
</P><P>

<UL>
<LI>
Edit the files <TT>`categories'</TT>, <TT>`responsible'</TT>, and
<TT>`submitters'</TT> in the directory <TT>`<VAR>GNATS_ROOT</VAR>/gnats-adm'</TT>
(see section <A HREF="gnats_3.html#SEC33">Changing your local configuration</A>) to
reflect your local needs.  Be sure to run <CODE>mkcat</CODE> after you update
the <TT>`categories'</TT> file (see section <A HREF="gnats_3.html#SEC45">Adding a new problem category</A>).  <EM>Note:</EM> these templates are not installed if they
already exist, i.e. if you are upgrading.  See section <A HREF="gnats_4.html#SEC61">Upgrading from older versions</A>.
<P>

<LI>
If you wish to install the GNATS user tools on other machines on
your network, see <A HREF="gnats_4.html#SEC60">Installing the user tools</A>.
</UL>
<P>

<A NAME="IDX190"></A>
<LI>
Create a <CODE>crontab</CODE> entry that periodically runs the program
<CODE>queue-pr</CODE> with the <SAMP>`--run'</SAMP> option.  For example, to run
<SAMP>`queue-pr --run'</SAMP> every ten minutes, create a file called
<TT>`.mycron'</TT> in the home directory of the user <CODE>gnats</CODE> which
contains the line:
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>0,10,20,30,40,50 * * * * <VAR>exec-prefix</VAR>/libexec/gnats/queue-pr --run
</FONT></pre></td></tr></table></P><P>

(Specify the full path name for <CODE>queue-pr</CODE>.)  Then run
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>crontab .mycron
</FONT></pre></td></tr></table></P><P>

See the <CODE>man</CODE> pages for <CODE>cron</CODE> and <CODE>crontab</CODE> for details
on using <CODE>cron</CODE>.
</OL>
<P>

<A NAME="Aliases"></A>
<HR SIZE="6">
<A NAME="SEC58"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC57"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC59"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC59"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC55"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_5.html#SEC62"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_9.html#SEC70">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> A.3 Setting up mail aliases </H2>
<!--docid::SEC58::-->
<P>

The following mail aliases must be placed in the file
<TT>`/etc/aliases'</TT> on the same machine where the GNATS tools
are installed.  You may need <CODE>root</CODE> access to add these aliases.
</P><P>

<UL>
<LI>
<A NAME="IDX191"></A>
Create an alias for the GNATS administrator.  This address should
point to the address of the person in charge of administrating
GNATS:
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>gnats-admin:  <VAR>address</VAR>
</FONT></pre></td></tr></table></P><P>

<LI>
<A NAME="IDX192"></A>
<A NAME="IDX193"></A>
<A NAME="IDX194"></A>
<A NAME="IDX195"></A>
Create an alias to redirect incoming Problem Reports.  This alias should
redirect incoming mail via a <EM>pipe</EM> to the program <SAMP>`queue-pr
-q'</SAMP>.  For example, if Problem Reports coming to your site are to arrive
at the address <SAMP>`bugs@your.company.com'</SAMP>, create an alias to the
effect of:
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>bugs:  "| <VAR>exec-prefix</VAR>/libexec/gnats/queue-pr -q"
</FONT></pre></td></tr></table></P><P>

This places incoming Problem Reports in
<TT>`<VAR>GNATS_ROOT</VAR>/gnats-queue'</TT>.
</P><P>

<LI>
<A NAME="IDX196"></A>
<A NAME="IDX197"></A>
<A NAME="IDX198"></A>
Create an alias for your site. This alias should be the same nametag
indicated by the variable <SAMP>`GNATS_SITE'</SAMP> in the file
<TT>`<VAR>GNATS_ROOT</VAR>/gnats-adm/config'</TT> (see section <A HREF="gnats_3.html#SEC35">The <CODE>config</CODE> file</A>), with an added suffix <SAMP>`-gnats'</SAMP>.  This alias,
<SAMP>`<VAR>GNATS_SITE</VAR>-gnats'</SAMP>, should point toward the local
submission address.  For instance, if your site is Tofu Technologies,
the presence of GNATS on your <VAR>site</VAR> would be aliased as the
following (the previous example is also shown):
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>bugs:  "| <VAR>exec-prefix</VAR>/libexec/gnats/queue-pr -q"
tofu-gnats: bugs
</FONT></pre></td></tr></table></P><P>

The report submission utility <CODE>send-pr</CODE> automatically appends the
<SAMP>`-gnats'</SAMP> to any arguments you specify (see section <A HREF="gnats_2.html#SEC14">Submitting Problem Reports</A>).  The <CODE>send-pr</CODE> which was installed when you
typed <KBD>make install</KBD> has a default argument of <VAR>GNATS_SITE</VAR>,
your site, so that when your local users simply type <KBD>send-pr</KBD> mail
is sent to your local GNATS.  Part of the installation process a
Submitter Site follows when installing <CODE>send-pr</CODE> is to set up an
alias for the Support Site from whom this submitter received
<CODE>send-pr</CODE>.  In other words, anyone you distribute <CODE>send-pr</CODE> to
is instructed to make an alias
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>tofu-gnats: bugs@tofu.com
</FONT></pre></td></tr></table></P><P>

<LI>
You may also wish to forward a copy of each incoming Problem Report to a
log.  This can be accomplished with something like:
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>bug-q: "| <VAR>exec-prefix</VAR>/libexec/gnats/queue-pr -q"
bug-log:  <VAR>GNATS_ROOT</VAR>/gnats-adm/bugs.log
bugs:      bug-q, bug-log
</FONT></pre></td></tr></table></P><P>

This configuration archives incoming Problem Reports in the file
<TT>`<VAR>GNATS_ROOT</VAR>/gnats-adm/bug.log'</TT>, and also feeds them to the
program <CODE>queue-pr</CODE>.  (Remember, <TT>`bug.log'</TT> needs to be
world-writable, and should be pruned regularly; see section <A HREF="gnats_3.html#SEC31">GNATS Administration</A>.)
</P><P>

<LI>
If you want your users to be able to query the database by mail, use the
following alias:
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>query-pr: "| <VAR>exec-prefix</VAR>/libexec/gnats/mail-query"
</FONT></pre></td></tr></table></P><P>

The <CODE>mail-query</CODE> program uses <SAMP>`--restricted'</SAMP> to search on the
database, and by default only searches for PRs that aren't closed
(see section <A HREF="gnats_2.html#SEC23">Querying the database</A>).
</P><P>

</UL>
<P>

<A NAME="Installing the daemon"></A>
<HR SIZE="6">
<A NAME="SEC59"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC58"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC60"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC60"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC55"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_5.html#SEC62"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_9.html#SEC70">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> A.4 Installing the daemon </H2>
<!--docid::SEC59::-->
<P>

By default, the daemon and clients are set to use port 1529.  Add the line
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>support		1529/tcp			# GNATS
</FONT></pre></td></tr></table></P><P>

to your <TT>`/etc/services'</TT> file.  If you want a different port,
or a different service name or port, configure GNATS with
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>--with-gnats-service=<VAR>servicename</VAR>
--with-gnats-port=<VAR>portnumber</VAR>
</FONT></pre></td></tr></table></P><P>

In your <TT>`inetd.conf'</TT> file, add the line
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>support	stream	tcp	nowait	gnats	/usr/local/lib/gnats/gnatsd gnatsd
</FONT></pre></td></tr></table></P><P>

adjusting the path accordingly.  To make <CODE>inetd</CODE> start spawning the GNATS daemon
when connected on that port, send it a hangup signal (<CODE>HUP</CODE>).
</P><P>

By default, the server for the GNATS daemon is assumed to be one with the
name of <SAMP>`gnats'</SAMP>.  If you'd like something else, use
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>--with-gnats-server=<VAR>hostname</VAR>
</FONT></pre></td></tr></table></P><P>

In the <TT>`gnats-adm'</TT> directory, you'll want to edit
<TT>`gnatsd.conf'</TT>.  It lists the hosts allowed to access your server
and their default access level.  Or, if you're using Kerberos, it shows
the sites that don't require Kerberos authentication.  The format is
reserved for future revision; only the first two fields are actually
used:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>site.com:view:
</FONT></pre></td></tr></table></P><P>

The third field might in the future be used for things like controlling
what categories, submitter-id'd PRs, etc., can be accessed from that
site.  In the file that logs syslog messages (<TT>`/var/adm/messages'</TT>,
for example) you'll find the notification of denied access.
</P><P>

<A NAME="Installing tools"></A>
<HR SIZE="6">
<A NAME="SEC60"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC59"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC61"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC61"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC55"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_5.html#SEC62"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_9.html#SEC70">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> A.5 Installing the user tools </H2>
<!--docid::SEC60::-->
<P>

When you install the GNATS utilities, the user tools are installed
by default on the host machine.  If your machine is part of a network,
however, you may wish to install the user tools on each machine in the
network so that responsible parties on those machines can submit new
Problem Reports, query the database, and edit existing PRs.  To do this,
follow these steps <EM>on each new host</EM>.  You may need <CODE>root</CODE> access on
each machine.
</P><P>

<OL>
<LI>
Make sure that the directory where GNATS resides is mounted to each
system that will need access to it, so <VAR>GNATS_ROOT</VAR> will be the same
for each host.  (You can do this with symbolic links as well.)
<P>

<LI>
Either mount the disk which contains your source directory, or make a
copy of the GNATS source code tree in a separate directory on each
system you wish to build on.
<P>

<LI>
Run <CODE>configure</CODE>, <EM>without</EM> specifying
<SAMP>`--with-full-gnats'</SAMP>, and using the same argument (if any) for
the option
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>--with-gnats-root=<VAR>GNATS_ROOT</VAR>
</FONT></pre></td></tr></table></P><P>

that you specified when building the GNATS utilities
(see section <A HREF="gnats_4.html#SEC56">Configuring and compiling the software</A>).
You may use different values for the other options to <CODE>configure</CODE>.
Again, <EM>do not</EM> use <SAMP>`--with-full-gnats'</SAMP> at this point, as
that creates all the GNATS programs.  Without this option,
<CODE>configure</CODE> only instructs the resulting <TT>`Makefile'</TT> to create
the user utilities.
</P><P>

<EM>You may need <CODE>root</CODE> access on each host for the following steps.</EM>
</P><P>

<LI>
<A NAME="IDX199"></A>
Create an account for a user named GNATS on the new host.  This user
must have an entry in the file <TT>`/etc/passwd'</TT>.  The user ID for
<CODE>gnats</CODE> must be the same as on the main GNATS host.
<P>

<LI>
Run 
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>make all info install install-info
</FONT></pre></td></tr></table></P><P>

This builds and installs the <CODE>gnats</CODE> user tools <CODE>query-pr</CODE>,
<CODE>edit-pr</CODE>, and <CODE>send-pr</CODE> on the new host, and installs
them in <TT>`<VAR>exec-prefix</VAR>/bin'</TT> on the new host (<EM>Note:</EM>
the value for <VAR>exec-prefix</VAR> on the new host may be different from
the value you used when building the GNATS utilities;
see section <A HREF="gnats_5.html#SEC64"><VAR>exec-prefix</VAR></A>).  The programs <CODE>pr-edit</CODE>
and <CODE>pr-addr</CODE> are installed into
<TT>`<VAR>exec-prefix</VAR>/libexec/gnats'</TT>.
</P><P>

<CODE>info</CODE> files are created as well, and are installed into
<TT>`<VAR>prefix</VAR>/info'</TT>.  The Elisp files <TT>`gnats.el'</TT> and
<TT>`send-pr.el'</TT> (and possibly <TT>`gnats.elc'</TT>
if <CODE>make</CODE> was able to compile them using Emacs) are installed into
<TT>`<VAR>prefix</VAR>/share/emacs/site-lisp'</TT> unless you change the
<SAMP>`lispdir'</SAMP> variable in <TT>`Makefile.in'</TT> (see section <A HREF="gnats_4.html#SEC56">Configuring and compiling the software</A>).
</P><P>

<A NAME="IDX200"></A>
<A NAME="IDX201"></A>
<A NAME="IDX202"></A>
<LI>
Add the following lines to the file <TT>`default.el'</TT> in the Emacs
lisp repository on the new host, or instruct your responsible parties
who use these hosts to add them to their <TT>`.emacs'</TT> files:
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>(autoload 'edit-pr "gnats"
   "Command to edit a problem report." t)
(autoload 'view-pr "gnats"
   "Command to view a problem report." t)
(autoload 'unlock-pr "gnats"
   "Unlock a problem report." t)
(autoload 'query-pr "gnats"
   "Command to query information about problem reports." t)
(autoload 'send-pr-mode "send-pr"
   "Major mode for sending problem reports." t)
(autoload 'send-pr "send-pr"
   "Command to create and send a problem report." t)
</FONT></pre></td></tr></table></P><P>

<LI>
Copy the file <TT>`<VAR>prefix</VAR>/share/gnats/<VAR>site</VAR>'</TT> from the
original host to the new host (which may have a different value for
<VAR>prefix</VAR>).  This is the list of valid categories that
<CODE>send-pr</CODE> uses (see section <A HREF="gnats_5.html#SEC62">Where GNATS lives</A>).
<VAR>site</VAR> is your local site, the value of <SAMP>`GNATS_SITE'</SAMP> in the
<TT>`config'</TT> file (see section <A HREF="gnats_3.html#SEC35">The <CODE>config</CODE> file</A>).
<P>

</OL>
<P>

<A NAME="Upgrading"></A>
<HR SIZE="6">
<A NAME="SEC61"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC60"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_5.html#SEC62"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC55"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC55"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_5.html#SEC62"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_9.html#SEC70">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> A.6 Upgrading from older versions </H2>
<!--docid::SEC61::-->
<P>

If you are upgrading from a previous release of GNATS, you probably
do not want to delete your current configuration files or your current
database.  The new GNATS can be installed around the older version.
</P><P>

You need to:
</P><P>

<UL>
<LI>
Specify your current <VAR>GNATS_ROOT</VAR> on the command line to
<CODE>configure</CODE> when you build the new tools, with
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>configure --with-full-gnats --with-gnats-root=<VAR>GNATS_ROOT</VAR>
</FONT></pre></td></tr></table></P><P>

(See section <A HREF="gnats_4.html#SEC56">Configuring and compiling the software</A>.)
</P><P>

<LI>
Remove the directory <TT>`gnats-bin'</TT> from <VAR>GNATS_ROOT</VAR>; it is
no longer used.
<P>

<LI>
Update your current mail aliases to reflect that <CODE>queue-pr</CODE> now
resides in <TT>`<VAR>exec-prefix</VAR>/libexec/gnats'</TT> rather than
<TT>`<VAR>GNATS_ROOT</VAR>/gnats-bin'</TT> (see section <A HREF="gnats_5.html#SEC62">Where GNATS lives</A>).
<P>

<LI>
Change the default <CODE>PATH</CODE> for the <CODE>gnats</CODE> user to search the
directories <TT>`<VAR>exec-prefix</VAR>/bin'</TT> and
<TT>`<VAR>exec-prefix</VAR>/libexec/gnats'</TT>.
<P>

<LI>
Reinstall the GNATS user tools on all other hosts on your network
(see section <A HREF="gnats_4.html#SEC60">Installing the user tools</A>).
<P>

<LI>
Redistribute <CODE>send-pr</CODE> to your Submitter Sites
(see section <A HREF="gnats_3.html#SEC48">Configuring <CODE>send-pr</CODE> for the outside world</A>).
This is not absolutely necessary, as GNATS can read Problem Reports
generated by older versions of <CODE>send-pr</CODE>.  It should be done
eventually, however, as <CODE>send-pr</CODE> is improved over older
versions.
<P>

</UL>
<P>

<A NAME="Locations"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_4.html#SEC55"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_5.html#SEC62"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_9.html#SEC70">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>

</BODY>
</HTML>
