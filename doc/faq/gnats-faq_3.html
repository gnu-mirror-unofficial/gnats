<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<!-- Created on January, 27  2003 by texi2html 1.65 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>GNATS Frequently Asked Questions: Configuration</TITLE>

<META NAME="description" CONTENT="GNATS Frequently Asked Questions: Configuration">
<META NAME="keywords" CONTENT="GNATS Frequently Asked Questions: Configuration">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.65">

</HEAD>

<BODY LANG="en" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC11"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_2.html#SEC10"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC12"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_4.html#SEC31"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_4.html#SEC31"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 3. Configuration Issues </H1>
<!--docid::SEC11::-->
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC12">3.1 General Configuration Questions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">General questions about GNATS configuration</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC17">3.2 Gnatsd, the GNATS Daemon</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Configuration of the GNATS daemon</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC25">3.3 E-Mail Issues</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Problems with the e-mail interface</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC28">3.4 Miscellaneous Configuration Issues</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Other configuration problems</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="General configuration"></A>
<HR SIZE="6">
<A NAME="SEC12"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC11"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC13"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC17"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 3.1 General Configuration Questions </H2>
<!--docid::SEC12::-->
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC13">3.1.1 How do I add a new database?</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to create a new database</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC14">3.1.2 How do I rename a category?</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC15">3.1.3 How do I add, remove, or rename a PR field?</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC16">3.1.4 How do make Audit-Trail append-only?</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Add a database"></A>
<HR SIZE="6">
<A NAME="SEC13"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC12"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC14"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC12"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC17"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 3.1.1 How do I add a new database? </H3>
<!--docid::SEC13::-->
<P>

<B>A: (GNATS 3.1xx)</B> 
<OL>
<LI>
Create the base directory for the new database, say
`<TT>/usr/local/gnats/db2</TT>', and make sure it is owned by the
GNATS user.
<P>

<LI>
In there, create subdirectories `<TT>gnats-adm</TT>',
`<TT>gnats-adm/locks</TT>', and `<TT>gnats-queue</TT>',
and make sure they is owned by the GNATS user.
<P>

<LI>
Now you need to populate the new `<TT>gnats-adm</TT>' directory.  The
easiest way is to copy all files from `<TT>gnats-db/gnats-adm</TT>' to
`<TT>/usr/local/gnats/db2/gnats-adm</TT>', and edit them to reflect the
needs of your new database.  Again, make sure they are owned by the
gnats user.
<P>

Note that there <EM>must</EM> be a category named <CODE>pending</CODE>.  It is
used when no category is given in a report, and when a report names an
invalid category.
</P><P>

Also note that each database needs its own mail address for submissions
(see also step 8 below), and that you must enter it in the file
`<TT>config</TT>'.
</P><P>

<LI>
As the GNATS user, 
run `<SAMP>mkcat --directory=/usr/local/gnats/db2</SAMP>' to create the
directories for the categories.  Remove the files `<TT>current</TT>' and
`<TT>index</TT>', if they exist.
<P>

<LI>
If the new database is split off of another one, move or copy the
existing reports to their new location.  This is easiest if the
categories have the same names as in the original database.  (See
<A HREF="gnats-faq_3.html#SEC14">3.1.2 How do I rename a category?</A> if some of them changed names.)
<P>

Run the program <CODE>gen-index</CODE> to create the index file
(see section `Regenerating the index' in <CITE>Keeping Track</CITE>).
</P><P>

Find the greatest report number and put it (or any larger number)
into `<TT>/usr/local/gnats/db2/gnats-adm/current</TT>'.
</P><P>

<STRONG>Caution:</STRONG> E-mail updates to the PRs you moved to the new
database may still arrive at the old database.  You may want to
contact everybody who knows about these PRs, asking them to use
the mail address of the new database when sending a follow-up.
</P><P>

<LI>
Now add a line for the new database to `<TT>gnats-db.conf</TT>', like
this:
<P>

	<CODE>/usr/local/gnats/db2:GreatNewDB</CODE>
</P><P>

Gnatsd reads it on startup (and as it is started by inetd, this means
it becomes effective with the next connection to gnatsd).  Gnatsweb
(see <A HREF="gnats-faq_4.html#SEC32">4.1 Gnatsweb</A>) learns the database list from gnatsd, so it will offer
you the new database "GreatNewDB" when it is invoked next time.
</P><P>

If you do not know where `<TT>gnats-db.conf</TT>' lives, run:
</P><P>

`<SAMP>strings /where/ever/gnatsd | grep gnats-db.conf</SAMP>'
</P><P>

<LI>
Don't forget to setup a cron job to run through the additional
`<TT>gnats-queue</TT>'.  Note that you need to specify the database
directory to `<TT>queue-pr</TT>', i.e.,
<P>

`<SAMP>/usr/local/lib/gnats/queue-pr -d /usr/local/gnats/db2 -r</SAMP>'
</P><P>

or, if you prefer the long options,
</P><P>

`<SAMP>/usr/local/lib/gnats/queue-pr --directory=/usr/local/gnats/db2 --run</SAMP>'
</P><P>

<LI>
Don't forget to create mail aliases for your new database
(see section `Setting up mail aliases' in <CITE>Keeping Track</CITE>).
Take care that the aliases have the right database, e.g.,
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>GreatNewDB-bugs:  "|/usr/local/lib/gnats/queue-pr -d /usr/local/gnats/db2 -q"
GreatNewDB-query: "|/usr/local/lib/gnats/mail-query -d /usr/local/gnats/db2"
</FONT></pre></td></tr></table></P><P>

Make sure that `<TT>/usr/local/gnats/db2/gnats-adm/config</TT>' gives the
correct mail addresses for <VAR>GNATS_ADDR</VAR> (this <EM>must</EM> be
different for each database) and for <VAR>GNATS_ADMIN</VAR> (this is probably
the same for all databases).
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>GNATS_ADDR="GreatNewDB-bugs@bugs.example.com"
GNATS_ADMIN="gnats-admin@bugs.example.com"
</FONT></pre></td></tr></table></P><P>

If your GNATS sits behind a firewall and needs to exchange mails
with the outside world, see also <A HREF="gnats-faq_3.html#SEC27">Mail from GNATS bounces</A>.
</P><P>

</OL>
<P>

<B>A: (GNATS 4.x)</B> With version 4, this has become much easier
(see section `Adding another database' in <CITE>Keeping Track</CITE>):
<OL>
<LI>
Add a line for the new database to `<TT>databases</TT>', like this:
<P>

	<CODE>GreatNewDB:Our great tools:/usr/local/gnats/db2</CODE>
</P><P>

Then, as the GNATS user, run `<SAMP>mkdb GreatNewDB</SAMP>' to create the
database.  Make sure that the directory (in our example,
`<TT>/usr/local/gnats/db2</TT>') can be created by the GNATS user.
</P><P>

(Note that there <EM>must</EM> be a database named <CODE>default</CODE>.  It
is used as a fallback by some tools if no database is specified.  You
need not use it actively, but you should have run `<SAMP>mkdb default</SAMP>'.)
</P><P>

Gnatsd reads the file `<TT>databases</TT>' on startup (and as it is
started by inetd, this means it becomes effective with the next
connection to gnatsd).  Gnatsweb (see <A HREF="gnats-faq_4.html#SEC32">4.1 Gnatsweb</A>) learns the
database list from gnatsd, so it will offer you the new database
"GreatNewDB" when it is invoked next time.
</P><P>

If you do not know where `<TT>databases</TT>' lives, run:
</P><P>

`<SAMP>strings /where/ever/gnatsd | grep databases</SAMP>'
</P><P>

<LI>
Now, as the GNATS user, edit the files in directory
`<TT>/usr/local/gnats/db2/gnats-adm</TT>' to reflect the needs of
your new database.
<P>

<LI>
Depending on the settings in the `<TT>dbconfig</TT>' file of the new
database, you need not run <CODE>mkcat</CODE> anymore in order to
create new category directories in your database---GNATS 4
creates them automatically when they are missing.  See section `The <CODE>dbconfig</CODE> file' in <CITE>Keeping Track</CITE>, for details.
<P>

<LI>
Don't forget to setup a cron job to run through the additional
`<TT>gnats-queue</TT>'.  Note that you need to specify the database to
`<TT>queue-pr</TT>', i.e.,
<P>

`<SAMP>/usr/local/lib/gnats/queue-pr -d GreatNewDB -r</SAMP>'
</P><P>

or, if you prefer the long options,
</P><P>

`<SAMP>/usr/local/lib/gnats/queue-pr --database=GreatNewDB --run</SAMP>'
</P><P>

<LI>
Don't forget to create mail aliases for your new database
(see section `Setting up mail aliases' in <CITE>Keeping Track</CITE>).
Take care that the aliases have the right database, e.g.,
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>GreatNewDB-bugs:  "|/usr/local/libexec/gnats/queue-pr -d GreatNewDB -q"
GreatNewDB-query: "|/usr/local/libexec/gnats/mail-query -d GreatNewDB"
</FONT></pre></td></tr></table></P><P>

If you are updating from GNATS 3.1xx, note that the `<SAMP>-d</SAMP>'
option has changed its meaning: it does not give the directory of the
database, but its name.  (In case you prefer the long form of the
option, it is now `<SAMP>--database</SAMP>' instead of `<SAMP>--directory</SAMP>'.)
</P><P>

If your GNATS sits behind a firewall and needs to exchange mails
with the outside world, see also <A HREF="gnats-faq_3.html#SEC27">Mail from GNATS bounces</A>.
</P><P>

</OL>
<P>

<A NAME="Renaming a Category"></A>
<HR SIZE="6">
<A NAME="SEC14"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC13"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC15"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC15"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC12"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC17"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 3.1.2 How do I rename a category? </H3>
<!--docid::SEC14::-->
<P>

Renaming a category requires to touch every PR in that category,
because each report contains the name of its category.
</P><P>

To rename category <CODE>A</CODE> to <CODE>B</CODE>, proceed as follows:
</P><P>

<OL>
<LI>
Create a new category <CODE>B</CODE>.
<P>

<LI>
Edit every report in category <CODE>A</CODE>, changing its category to
<CODE>B</CODE>.
This can be done with any GNATS client; check the archives
of the HELP-GNATS mailing list for hints about automating
this step.
<P>

<LI>
Run <CODE>gen-index</CODE> (see section `Regenerating the index' in <CITE>Keeping Track</CITE>) to refresh the `<TT>index</TT>' file.
<P>

<LI>
If you are using GNATS 4 (or planning to upgrade soon), you
should not remove the category <CODE>A</CODE>.  When a follow-up to an
existing PR arrives via e-mail, GNATS 4.x checks that both
the category and the PR number indicated in the mail exist (this
is a sanity check).
<P>

To reduce the risk of new reports being filed to category
<CODE>A</CODE>, change its description in the `<TT>categories</TT>' file to
something like `<SAMP>obsolete, use category <CODE>B</CODE> instead</SAMP>'.
</P><P>

</OL>
<P>

<A NAME="Changing Fields"></A>
<HR SIZE="6">
<A NAME="SEC15"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC14"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC16"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC16"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC12"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC17"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 3.1.3 How do I add, remove, or rename a PR field? </H3>
<!--docid::SEC15::-->
<P>

<B>A: (GNATS 3.1xx)</B> The fields and their names are fixed in
GNATS 3.1xx, so this is not possible.
</P><P>

<B>A: (GNATS 4.x)</B> Edit the file `<TT>dbconfig</TT>' to reflect your
changes.
</P><P>

Note that the PR fields with the builtin-names <CODE>severity</CODE>,
<CODE>priority</CODE> and <CODE>state</CODE> are required if you want automatic
reminders (<CODE>notify-about-expired-prs = true</CODE>).  In this case, the
file `<TT>submitters</TT>' must also contain a response time.
The <CODE>severity</CODE> field is checked for values <CODE>critical</CODE> and
<CODE>serious</CODE>, and <CODE>priority</CODE> for value <CODE>high</CODE>.
This is currently not configurable.
</P><P>

<A NAME="Append-only Audit-Trail"></A>
<HR SIZE="6">
<A NAME="SEC16"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC15"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC17"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC12"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC17"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 3.1.4 How do make Audit-Trail append-only? </H3>
<!--docid::SEC16::-->
<P>

Mike Hoolehan wanted a "bugzilla-ish appending audit trail", i.e.,
Audit-Trail can not be changed arbitrarily, only appended.
</P><P>

He posted the following solution to the <A HREF="mailto:help-gnats@gnu.org">help-gnats@gnu.org</A>
mailing list:
</P><P>

First, set the Audit-Trail field to read-only.  Then add this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>field "Add-To-Audit-Trail" {
   description "Add a log entry to Audit Trail"
   multitext { default "\n" }
   on-change  {
        add-audit-trail
        audit-trail-format {
        format "---- Comments by %s on %s ----\n %s\n\n" #whatever you like
        fields { "$EditUserEmailAddr" "$CurrentDate" "$NewValue" }
        }
    }
    on-change {
        set-field "Add-To-Audit-Trail" { "\n" }
    }
}
</pre></td></tr></table></P><P>

<A NAME="Gnatsd"></A>
<HR SIZE="6">
<A NAME="SEC17"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC16"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC18"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC25"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC25"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 3.2 Gnatsd, the GNATS Daemon </H2>
<!--docid::SEC17::-->
<P>

<A NAME="IDX3"></A>
<A NAME="IDX4"></A>
<A NAME="IDX5"></A>
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC18">3.2.1 Gnatsd Port Number</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to connect to gnatsd</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC19">3.2.2 How to Start Gnatsd</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to make gnatsd accept connections</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC22">3.2.3 Gnatsd Messages</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Some error messages and what they mean</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Port Number"></A>
<HR SIZE="6">
<A NAME="SEC18"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC17"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC19"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC25"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC17"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC25"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 3.2.1 Gnatsd Port Number </H3>
<!--docid::SEC18::-->
<P>

<A NAME="IDX6"></A>
<A NAME="IDX7"></A>
</P><P>

In 3.xxx versions, gnatsd uses port 1529 by default; as this port is
officially assigned to another application (see the
<A HREF="http://www.iana.org/assignments/port-numbers">list of port numbers</A>
maintained by the <A HREF="http://www.iana.org/">Internet Assigned Numbers
Authority</A>)
it will probably change in 4.x.
</P><P>

If you want/need to run gnatsd on another port, you can change the
default port at compile time (call <CODE>configure --help</CODE> to learn
about compile time configuration options).  Most clients also accept
an option or configuration variable to change the port.  Don't forget
to tell inetd (or xinetd, or whatever super-server you use) to start
gnatsd on the other port.
</P><P>

<A NAME="Starting gnatsd"></A>
<HR SIZE="6">
<A NAME="SEC19"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC18"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC22"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC22"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC17"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC25"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 3.2.2 How to Start Gnatsd </H3>
<!--docid::SEC19::-->
<P>

Gnatsd is intended to be started by some "super server", like
<CODE>inetd</CODE> or <CODE>xinetd</CODE>.  ("Super servers" are sometimes also
called "super daemons".)
</P><P>

This is also described in the GNATS manual; see section `Installing the daemon' in <CITE>Keeping Track</CITE>.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC20">How to configure inetd to start gnatsd</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The traditional super server</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC21">How to configure xinetd to start gnatsd</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Another widespread super server</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="inetd configuration"></A>
<A NAME="SEC20"></A>
<H4> How to configure inetd to start gnatsd </H4>
<!--docid::SEC20::-->
<P>

<A NAME="IDX8"></A>
</P><P>

If your gnatsd will be started by inetd (the "internet daemon"),
add the following entry to your `<TT>/etc/inetd.conf</TT>':
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre># port                    userid program
support stream tcp nowait gnats /usr/local/libexec/gnats/gnatsd gnatsd
</FONT></pre></td></tr></table></P><P>

and to `<TT>/etc/services</TT>':
<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>support		1529/tcp		# GNATS
</FONT></pre></td></tr></table></P><P>

(You may need to use tabulator characters to separate the fields of
`<TT>/etc/services</TT>'.)  Then send inetd a hangup signal
(<CODE>kill -HUP <EM>pid-of-inetd</EM></CODE>).
</P><P>

You may want to use another port instead of 1529 (see section <A HREF="gnats-faq_3.html#SEC18">3.2.1 Gnatsd Port Number</A>).
</P><P>

<A NAME="xinetd configuration"></A>
<A NAME="SEC21"></A>
<H4> How to configure xinetd to start gnatsd </H4>
<!--docid::SEC21::-->
<P>

<A NAME="IDX9"></A>
</P><P>

If your gnatsd will be started by xinetd (the "extended internet
daemon"), create a file `<TT>/etc/xinetd.d/support</TT>' with the
following lines (see section `Installing the daemon' in <CITE>Keeping Track</CITE>):
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>service support
{
        disable     = no
        socket_type = stream
        protocol    = tcp
        wait        = no
        user        = gnats
        server      = /usr/local/lib/gnats/gnatsd
        server_args = gnatsd
}
</pre></td></tr></table></P><P>

or add theses lines to your `<TT>xinetd.conf</TT>' file, whatever is
appropriate.  The equal signs seem to need spaces around them with
some versions of xinetd.
</P><P>

You need to add
<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>support		1529/tcp		# GNATS
</FONT></pre></td></tr></table></P><P>

to `<TT>/etc/services</TT>' (it may be necessary to use tabulator
characters to separate the fields), and to tell xinetd to reread its
configuration (<CODE>kill -HUP <EM>pid-of-xinetd</EM></CODE>).
</P><P>

<A NAME="Gnatsd messages"></A>
<HR SIZE="6">
<A NAME="SEC22"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC19"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC25"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC25"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC17"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC25"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 3.2.3 Gnatsd Messages </H3>
<!--docid::SEC22::-->
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC23">You are not on the host access list: stdin (stdin)</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC24">You are not on the host access list</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="No host access for stdin"></A>
<A NAME="SEC23"></A>
<H4> You are not on the host access list: stdin (stdin) </H4>
<!--docid::SEC23::-->
<P>

<B>Q:</B> When starting gnatsd manually (on the command line), I get
`<SAMP>520 You are not on the host access list: stdin (stdin)</SAMP>'.
</P><P>

<B>A: (GNATS 3.1xx)</B>
Gnatsd is not intended to be started manually, but via inetd,
xinetd, or a similar "super server".  When gnatsd is started this way,
its stdin and stdout (standard input and standard output streams) are
connected to a so called "TCP socket" (one end of the network
connection), and from this socket gnatsd learns the IP address of the
remote end (and from this it derives the remote host name).  When you
start gnatsd from the command line, its stdin and stdout are connected
to the terminal, and thus gnatsd gets a nonsense value.
</P><P>

You usually need `<SAMP>root</SAMP>' privileges in order to change the
configuration of your "super server".  If you don't have them, contact
your system administrator.
</P><P>

See <A HREF="gnats-faq_3.html#SEC19">3.2.2 How to Start Gnatsd</A> for inetd and xinetd configuration.
</P><P>

<B>A: (GNATS 4.0)</B>
This error message should not occur with gnatsd 4.0 anymore, because
gnatsd can be started from the command line.
However, this probably only makes sense for debugging and diagnosing
problems.  Furthermore, you need to play the part of the client
program yourself (i.e., you must "speak" the gnatsd client protocol).
</P><P>

<A NAME="No host access for remote"></A>
<A NAME="SEC24"></A>
<H4> You are not on the host access list </H4>
<!--docid::SEC24::-->
<P>

<B>Q:</B> Gnatsd rejects connections from a remote host with the error
message `<SAMP>520 You are not on the host access list</SAMP>'.
</P><P>

<B>A:</B> Check the file `<TT>gnatsd.conf</TT>' (GNATS 3.xxx) or
`<TT>gnatsd.host_access</TT>' (GNATS 4.x).  With GNATS 3,
this is usually `<TT>/usr/local/etc/gnatsd.conf</TT>'; with
GNATS 4, it is usually
`<TT>/usr/local/etc/gnats/gnatsd.host_access</TT>'.
</P><P>

Each line of the file names a host and its access level, separated by
colons.  Gnatsd tries the lines in turn to match the remote host, and
the first line that matches wins.
</P><P>

The first field specifies the host(s); it may be a host name (like
`<SAMP>goedel.example.com</SAMP>'), a partial domain (like
`<SAMP>*.example.com</SAMP>'), an IP address (like `<SAMP>192.168.1.5</SAMP>'), or a
partial IP address (like `<SAMP>192.168.*</SAMP>').  If it is only `<SAMP>*</SAMP>', it
matches all hosts.
</P><P>

Depending on how IP addresses are mapped to hostnames on your gnatsd
machine, you may be able to omit the domain (like in `<SAMP>goedel</SAMP>').
You may even <EM>need</EM> to omit the domain for some hosts.
</P><P>

The second field is the access level granted to the remote host.  This
is usually increased by the access level granted to the user as soon
as (s)he logs in.
</P><P>

The third field is currently not used; just leave it empty (but supply
the colon between the second and the third field).
</P><P>

Example:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#
# This is a comment
#
# Grant view access to all hosts with IP adresses
# ranging from 192.168.0.0 to 192.168.255.255:
192.168.*:view:
# Users on host goedel.example.com get (at least) edit access:
goedel.example.com:edit:
# Users from escher.example.com may view all reports, even
# confidential ones:
escher.example.com:viewconf:
# Users from bach.example.com may only view all non-confidential
# reports:
bach.example.com:view:
# Users from other example.com hosts
# only get the access specified for them in gnatsd.user_access:
*.example.com:none:
# Same for domain our-users.example:
*.our-users.example:none:
# All other hosts are rejected
# without even asking for username and password:
*:deny:
</pre></td></tr></table></P><P>

The format is described in detail in the comments at the beginning of
the file.
</P><P>

<A NAME="E-Mail"></A>
<HR SIZE="6">
<A NAME="SEC25"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC22"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC28"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC17"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_4.html#SEC31"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 3.3 E-Mail Issues </H2>
<!--docid::SEC25::-->
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC26">queue-pr not available for sendmail programs</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC27">Mail from GNATS bounces</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="queue-pr not available"></A>
<A NAME="SEC26"></A>
<H4> queue-pr not available for sendmail programs </H4>
<!--docid::SEC26::-->
<P>

Your sendmail installation uses `<SAMP>smrsh</SAMP>' to check programs that are
invoked from a mail alias.  `<SAMP>smrsh</SAMP>' only allows the execution of
programs of which it is told that they are save.  To tell it that
`<TT>queue-pr</TT>' is save, create a symbolic link in the directory
`<TT>/etc/smrsh</TT>' to `<TT>queue-pr</TT>', like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>mkdir /etc/smrsh	# if it does not yet exist
cd /etc/smrsh
ln -s /usr/local/libexec/gnats/queue-pr queue-pr
</FONT></pre></td></tr></table></P><P>

Replace `<TT>/usr/local/libexec/gnats/queue-pr</TT>' by the real path to
`<TT>queue-pr</TT>'.
</P><P>

<A NAME="Outgoing mail bounces"></A>
<A NAME="SEC27"></A>
<H4> Mail from GNATS bounces </H4>
<!--docid::SEC27::-->
<P>

You are getting bounce mails like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>   ----- Transcript of session follows -----
... while talking to mail.example.com.:
&#62;&#62;&#62; MAIL From:&#60;gnats@mymachine.subdomain.example.com&#62; SIZE=334
&#60;&#60;&#60; 501 5.1.8 &#60;gnats@mymachine.subdomain.example.com&#62;...
      Domain of sender address gnats@mymachine.subdomain.example.com does not exist
</pre></td></tr></table></P><P>

Probably your GNATS sits behind a firewall, but it needs to
exchange mails with the world outside the firewall.  Make sure that
<VAR>GNATS_ADDR</VAR> is valid outside.
</P><P>

This is what probably happens behind the scenes: On its way to the
outside world, the sender address of the mail gets rewritten to
something "official" (like <CODE>Hans-Albert.Schneider@example.com</CODE>, as
opposed to <CODE>me@mymachine.subdomain.example.com</CODE>).  This is
especially necessary if the internal hosts are not visible outside.  If
your outgoing mail gateway still sees the internal address, it complains
with a message like the above (it has probably checked
<CODE>mymachine.subdomain.example.com</CODE> with your organization's external
DNS server, which does not know <CODE>mymachine</CODE>).
</P><P>

To solve this problem, get an "official" address for your GNATS
system, e.g., tool-bugs@example.com, and use that one for
<VAR>GNATS_ADDR</VAR>.
</P><P>

<A NAME="Miscellaneous"></A>
<HR SIZE="6">
<A NAME="SEC28"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC25"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_4.html#SEC31"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC11"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_4.html#SEC31"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 3.4 Miscellaneous Configuration Issues </H2>
<!--docid::SEC28::-->
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC29">New reports do not show up in the database</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="gnats-faq_3.html#SEC30">Assigning responsible etc. when entering a report</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">If you want to set additional fields when
                                   entering a report</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="No New Reports"></A>
<A NAME="SEC29"></A>
<H4> New reports do not show up in the database </H4>
<!--docid::SEC29::-->
<P>

<OL>
<LI>
Make sure you have set up the mail aliases for your database(s).  (See
<A HREF="gnats-faq_3.html#SEC13">3.1.1 How do I add a new database?</A> and section `Adding another database' in <CITE>Keeping Track</CITE>.)
<P>

<LI>
Try to send a PR using `<SAMP>send-pr</SAMP>'.  If you get error replies,
investigate the causes.  See <A HREF="gnats-faq_3.html#SEC25">3.3 E-Mail Issues</A>.
<P>

<LI>
Does a new file show up in the `<TT>gnats-queue</TT>' directory of your
database, with the report as its contents?
If it does, make sure you have created the cron job for this database.
<P>

<LI>
If the report does not show up in the `<TT>gnats-queue</TT>' of the desired
database, does it show up in the `<TT>gnats-queue</TT>' directory of another
database?
In this case, make sure your mail aliases are set up correctly;
especially, make sure that you have specified the correct
`<SAMP>--directory</SAMP>' option (`<SAMP>--database</SAMP>' for GNATS 4.x)
for each `<TT>queue-pr</TT>'.
<P>

</OL>
<P>

<A NAME="Initially Assign Field Values"></A>
<A NAME="SEC30"></A>
<H4> Assigning responsible etc. when entering a report </H4>
<!--docid::SEC30::-->
<P>

<B>Q:</B> When entering a new PR, I want to assign a value to some field
(e.g., <CODE>Responsible</CODE>) which is normally assigned by GNATS.
</P><P>

<B>A: (GNATS 3.1xx)</B>
This is not possible in GNATS 3.1xx.
</P><P>

<B>A: (GNATS 4.x)</B> This is done by adding the field name (in this
example, <CODE>Responsible</CODE>) to the <CODE>initial-entry</CODE> item at
the very end of the `<TT>dbconfig</TT>' file.  Gnatsweb will pick this up
and add a <CODE>Responsible</CODE> field to the Create PR form.
</P><P>

<A NAME="Clients"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_3.html#SEC11"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_4.html#SEC31"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_6.html#SEC43">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gnats-faq_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
by <I>Hans-Albert Schneider</I> on <I>January, 27  2003</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>
</FONT>

</BODY>
</HTML>
