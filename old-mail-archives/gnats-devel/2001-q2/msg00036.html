<!-- MHonArc v2.4.7 -->
<!--X-Subject: Re: Gnatsweb attachment handling broken by gnatsd -->
<!--X-From-R13: [vyna Lnznmny <cqzNmnznmny.bet> -->
<!--X-Date: 22 Apr 2001 17:50:44 &#45;0000 -->
<!--X-Message-Id: 87d7a4q4qs.fsf@zamazal.org -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 5.1.0.12.2.20010322224005.00b9d970@iwww.clustra.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Milan Zamazal - Re: Gnatsweb attachment handling broken by gnatsd</TITLE>
</HEAD>
<BODY>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--htdig_noindex-->
<p>This is the mail archive of the 
<tt>gnats-devel@sources.redhat.com</tt>
mailing list for the <a href="/gnats/">GNATS project</a>.


<!--/htdig_noindex-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<!--htdig_noindex-->
<HR>
<table border="0">
  <tr><th align="left">Index Nav:</th>
      <td colspan="2">
        [<A HREF="index.html#00036">Date&nbsp;Index</A>] [<a href="subjects.html#00036">Subject&nbsp;Index</a>] [<a href="authors.html#00036">Author&nbsp;Index</a>] [<A HREF="threads.html#00036">Thread&nbsp;Index</A>]
      </td>
  </tr>
  <tr><th align="left">Message Nav:</th>
      <td>[<A HREF="msg00035.html">Date&nbsp;Prev</A>]&nbsp;[<A HREF="msg00037.html">Date&nbsp;Next</A>]</td>
      <td>[<A HREF="msg00035.html">Thread&nbsp;Prev</A>]&nbsp;[<A HREF="msg00040.html">Thread&nbsp;Next</A>]</td>
  </tr>
</table>
<!--/htdig_noindex-->

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Gnatsweb attachment handling broken by gnatsd</h1>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Yngve Svendsen &lt;yngve dot svendsen at clustra dot com&gt;</li>
<li><em>Subject</em>: Re: Gnatsweb attachment handling broken by gnatsd</li>
<li><em>From</em>: Milan Zamazal &lt;pdm at zamazal dot org&gt;</li>
<li><em>Date</em>: 22 Apr 2001 18:27:39 +0200</li>
<li><em>Cc</em>: gnats-devel at sources dot redhat dot com</li>
<li><em>References</em>: &lt;5.1.0.12.2.20010322224005.00b9d970@iwww.clustra.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
[Sorry for the long delay in answer.]

&gt;&gt;&gt;&gt;&gt; &quot;YS&quot; == Yngve Svendsen &lt;yngve.svendsen@clustra.com&gt; writes:

    YS&gt; The handling of attachments by Gnatsweb currently seems to be
    YS&gt; broken, and this seems to be due to a &quot;feature&quot; in
    YS&gt; gnatsd. Gnatsweb stores attachments in the &quot;Unformatted&quot; field,
    YS&gt; and according to the GNATS ChangeLog:

    YS&gt; Tue Feb 1 17:47:45 2000 Bob Manson &lt;manson@feather&gt;

    YS&gt;          * pr.c (addLineToPR): Add spaces to the beginning of
    YS&gt; Unformatted: field entries if they don't have one already.
    YS&gt; Ignore text that looks like a field name if it isn't a valid
    YS&gt; name.

    YS&gt; This means that every line of data in the &quot;Unformatted&quot; field
    YS&gt; gets a leading space, and this breaks Gnatsweb's functions for
    YS&gt; decoding and handling attachments by embedding them in the PR
    YS&gt; data.

    YS&gt; Now, the question is: why was this &quot;feature&quot; added to gnatsd in
    YS&gt; the first place? Anynone care to take a look and see what they
    YS&gt; think?

I think it's there because unknown fields are added there and they
should be prevented looking like real fields, they should be a clear
part of the `Unformatted' field.

    YS&gt; By doing the following to addLineToPR in pr.c (basically
    YS&gt; commenting out the space-adding code) and rebuilding gnatsd,
    YS&gt; attachment handling worked again:

I don't think doing this is a good idea.

    YS&gt; The easiest way to fix Gnatsweb would be to remove this code
    YS&gt; from pr.c. Working around it in Gnatsweb would take a bit of
    YS&gt; coding and very likely affect performance a lot.

As it was already suggested, it's likely that attachements will be
handled in a special way in GNATS 4.x.  As for GNATS 4.0, I think
Gnatsweb should be fixed.  I don't know anything about the attachement
handling in Gnatsweb, but I think it's not a good ideat to store them in
the `Unformatted' field.  I'd suggest considering to require having the
`Attachement' field in `dbconfig' (I might add it to the default
`dbconfig' if it proves useful).

Regards,

Milan Zamazal

-- 
Free software is about freedom, not about free beer.  If you care only about
the latter, you'll end with no freedom and no free beer.

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00040" href="msg00040.html">Re: Gnatsweb attachment handling broken by gnatsd</a></strong>
<ul><li><em>From:</em> Yngve Svendsen</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<!--htdig_noindex-->
<table border="0">
  <tr><th align="left">Index Nav:</th>
      <td colspan="2">
        [<A HREF="index.html#00036">Date&nbsp;Index</A>] [<a href="subjects.html#00036">Subject&nbsp;Index</a>] [<a href="authors.html#00036">Author&nbsp;Index</a>] [<A HREF="threads.html#00036">Thread&nbsp;Index</A>]
      </td>
  </tr>
  <tr><th align="left">Message Nav:</th>
      <td>[<A HREF="msg00035.html">Date&nbsp;Prev</A>]&nbsp;[<A HREF="msg00037.html">Date&nbsp;Next</A>]</td>
      <td>[<A HREF="msg00035.html">Thread&nbsp;Prev</A>]&nbsp;[<A HREF="msg00040.html">Thread&nbsp;Next</A>]</td>
  </tr>
</table>
<!--/htdig_noindex-->

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
